(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{70358:(e,t,i)=>{"use strict";let r,n,s,o,a,l,c,h,u,d,f,p,m,_,g,y,v,b,x,E,w,O,T;i.d(t,{a:()=>J});var C,P=i(85407),S=i(27274),M=i(12115),A=i(60846);let k={LEFT:1,RIGHT:2,MIDDLE:4},U=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),L={NONE:0,IN:1,OUT:-1};function R(e){return e.isPerspectiveCamera}function z(e){return e.isOrthographicCamera}let j=2*Math.PI,D=Math.PI/2,F=Math.PI/180;function I(e,t,i){return Math.max(t,Math.min(i,e))}function V(e,t=1e-5){return Math.abs(e)<t}function H(e,t,i=1e-5){return V(e-t,i)}function N(e,t){return Math.round(e/t)*t}function Y(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Z(e){return Math.abs(e)<Number.MAX_VALUE?e:1/0*e}function B(e,t,i,r,n=1/0,s){let o=2/(r=Math.max(1e-4,r)),a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a),c=e-t,h=t,u=n*r;t=e-(c=I(c,-u,u));let d=(i.value+o*c)*s;i.value=(i.value-o*d)*l;let f=t+(c+d)*l;return h-e>0==f>h&&(f=h,i.value=(f-h)/s),f}function q(e,t,i,r,n=1/0,s,o){let a=2/(r=Math.max(1e-4,r)),l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l),h=t.x,u=t.y,d=t.z,f=e.x-h,p=e.y-u,m=e.z-d,_=h,g=u,y=d,v=n*r,b=f*f+p*p+m*m;if(b>v*v){let e=Math.sqrt(b);f=f/e*v,p=p/e*v,m=m/e*v}h=e.x-f,u=e.y-p,d=e.z-m;let x=(i.x+a*f)*s,E=(i.y+a*p)*s,w=(i.z+a*m)*s;i.x=(i.x-a*x)*c,i.y=(i.y-a*E)*c,i.z=(i.z-a*w)*c,o.x=h+(f+x)*c,o.y=u+(p+E)*c,o.z=d+(m+w)*c;let O=_-e.x,T=g-e.y,C=y-e.z;return O*(o.x-_)+T*(o.y-g)+C*(o.z-y)>0&&(o.x=_,o.y=g,o.z=y,i.x=(o.x-_)/s,i.y=(o.y-g)/s,i.z=(o.z-y)/s),o}function $(e,t){t.set(0,0),e.forEach(e=>{t.x+=e.clientX,t.y+=e.clientY}),t.x/=e.length,t.y/=e.length}function W(e,t){return!!z(e)&&(console.warn(`${t} is not supported in OrthographicCamera`),!0)}class Q{constructor(){this._listeners={}}addEventListener(e,t){let i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){let i=this._listeners[e];if(void 0!==i){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){let t=this._listeners[e.type];if(void 0!==t){e.target=this;let i=t.slice(0);for(let t=0,r=i.length;t<r;t++)i[t].call(this,e)}}}let K=1/8,X=/Mac/.test(null===(C=null==globalThis?void 0:globalThis.navigator)||void 0===C?void 0:C.platform);class G extends Q{static install(e){n=Object.freeze(new(r=e.THREE).Vector3(0,0,0)),s=Object.freeze(new r.Vector3(0,1,0)),o=Object.freeze(new r.Vector3(0,0,1)),a=new r.Vector2,l=new r.Vector3,c=new r.Vector3,h=new r.Vector3,u=new r.Vector3,d=new r.Vector3,f=new r.Vector3,p=new r.Vector3,m=new r.Vector3,_=new r.Vector3,g=new r.Spherical,y=new r.Spherical,v=new r.Box3,b=new r.Box3,x=new r.Sphere,E=new r.Quaternion,w=new r.Quaternion,O=new r.Matrix4,T=new r.Raycaster}static get ACTION(){return U}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=U.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=L.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new r.Vector3,this._focalOffsetVelocity=new r.Vector3,this._zoomVelocity={value:0},this._truckInternal=(e,t,i)=>{let r,n;if(R(this._camera)){let i=l.copy(this._camera.position).sub(this._target),s=this._camera.getEffectiveFOV()*F,o=i.length()*Math.tan(.5*s);r=this.truckSpeed*e*o/this._elementRect.height,n=this.truckSpeed*t*o/this._elementRect.height}else{if(!z(this._camera))return;let i=this._camera;r=e*(i.right-i.left)/i.zoom/this._elementRect.width,n=t*(i.top-i.bottom)/i.zoom/this._elementRect.height}this.verticalDragToForward?(i?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(r,0,!0),this.forward(-n,!0)):i?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+n,this._focalOffsetEnd.z,!0):this.truck(r,n,!0)},this._rotateInternal=(e,t)=>{let i=j*this.azimuthRotateSpeed*e/this._elementRect.height,r=j*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(i,r,!0)},this._dollyInternal=(e,t,i)=>{let r=Math.pow(.95,-e*this.dollySpeed),n=this._sphericalEnd.radius,s=this._sphericalEnd.radius*r,o=I(s,this.minDistance,this.maxDistance);this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(s,!0):(this.infinityDolly&&!this.dollyToCursor&&this.dollyInFixed(o-s,!0),this._dollyToNoClamp(o,!0)),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?s:o)-n,this._dollyControlCoord.set(t,i)),this._lastDollyDirection=Math.sign(-e)},this._zoomInternal=(e,t,i)=>{let r=Math.pow(.95,e*this.dollySpeed),n=this._zoom,s=this._zoom*r;this.zoomTo(s,!0),this.dollyToCursor&&(this._changedZoom+=s-n,this._dollyControlCoord.set(t,i))},void 0===r&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new r.Quaternion().setFromUnitVectors(this._camera.up,s),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=U.NONE,this._target=new r.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new r.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new r.Spherical().setFromVector3(l.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3],this._updateNearPlaneCorners(),this._boundary=new r.Box3(new r.Vector3(-1/0,-1/0,-1/0),new r.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new r.Vector2,this.mouseButtons={left:U.ROTATE,middle:U.DOLLY,right:U.TRUCK,wheel:R(this._camera)?U.DOLLY:z(this._camera)?U.ZOOM:U.NONE},this.touches={one:U.TOUCH_ROTATE,two:R(this._camera)?U.TOUCH_DOLLY_TRUCK:z(this._camera)?U.TOUCH_ZOOM_TRUCK:U.NONE,three:U.TOUCH_TRUCK};let i=new r.Vector2,n=new r.Vector2,o=new r.Vector2,c=e=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){let t=this._domElement.getBoundingClientRect(),i=e.clientX/t.width,r=e.clientY/t.height;if(i<this._interactiveArea.left||i>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}let t="mouse"!==e.pointerType?null:(e.buttons&k.LEFT)===k.LEFT?k.LEFT:(e.buttons&k.MIDDLE)===k.MIDDLE?k.MIDDLE:(e.buttons&k.RIGHT)===k.RIGHT?k.RIGHT:null;if(null!==t){let e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}if((e.buttons&k.LEFT)===k.LEFT&&this._lockedPointer)return;let i={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:t};this._activePointers.push(i),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,m(e)},h=e=>{e.cancelable&&e.preventDefault();let t=e.pointerId,i=this._lockedPointer||this._findPointerById(t);if(i){if(i.clientX=e.clientX,i.clientY=e.clientY,i.deltaX=e.movementX,i.deltaY=e.movementY,this._state=0,"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(e.buttons&k.LEFT)===k.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(e.buttons&k.MIDDLE)===k.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(e.buttons&k.RIGHT)===k.RIGHT&&(this._state=this._state|this.mouseButtons.right);_()}},u=e=>{let t=this._findPointerById(e.pointerId);if(!t||t!==this._lockedPointer){if(t&&this._disposePointer(t),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=U.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=U.NONE;g()}},d=-1,f=e=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===U.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){let t=this._domElement.getBoundingClientRect(),i=e.clientX/t.width,r=e.clientY/t.height;if(i<this._interactiveArea.left||i>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===U.ROTATE||this.mouseButtons.wheel===U.TRUCK){let e=performance.now();d-e<1e3&&this._getClientRect(this._elementRect),d=e}let t=X?-1:-3,i=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),r=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,n=this.dollyToCursor?-((e.clientY-this._elementRect.y)/this._elementRect.height*2)+1:0;switch(this.mouseButtons.wheel){case U.ROTATE:this._rotateInternal(e.deltaX,e.deltaY),this._isUserControllingRotate=!0;break;case U.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1),this._isUserControllingTruck=!0;break;case U.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0),this._isUserControllingOffset=!0;break;case U.DOLLY:this._dollyInternal(-i,r,n),this._isUserControllingDolly=!0;break;case U.ZOOM:this._zoomInternal(-i,r,n),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},p=e=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===G.ACTION.NONE){let t=e instanceof PointerEvent?e.pointerId:0,i=this._findPointerById(t);i&&this._disposePointer(i),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u);return}e.preventDefault()}},m=e=>{if(this._enabled){if($(this._activePointers,a),this._getClientRect(this._elementRect),i.copy(a),n.copy(a),this._activePointers.length>=2){let e=a.x-this._activePointers[1].clientX,t=a.y-this._activePointers[1].clientY,i=Math.sqrt(e*e+t*t);o.set(0,i);let r=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,s=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;n.set(r,s)}if(this._state=0,e){if("pointerType"in e&&"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._lockedPointer||(e.buttons&k.LEFT)!==k.LEFT||(this._state=this._state|this.mouseButtons.left),(e.buttons&k.MIDDLE)===k.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&k.RIGHT)===k.RIGHT&&(this._state=this._state|this.mouseButtons.right)}else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);((this._state&U.ROTATE)===U.ROTATE||(this._state&U.TOUCH_ROTATE)===U.TOUCH_ROTATE||(this._state&U.TOUCH_DOLLY_ROTATE)===U.TOUCH_DOLLY_ROTATE||(this._state&U.TOUCH_ZOOM_ROTATE)===U.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&U.TRUCK)===U.TRUCK||(this._state&U.TOUCH_TRUCK)===U.TOUCH_TRUCK||(this._state&U.TOUCH_DOLLY_TRUCK)===U.TOUCH_DOLLY_TRUCK||(this._state&U.TOUCH_ZOOM_TRUCK)===U.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&U.DOLLY)===U.DOLLY||(this._state&U.TOUCH_DOLLY)===U.TOUCH_DOLLY||(this._state&U.TOUCH_DOLLY_TRUCK)===U.TOUCH_DOLLY_TRUCK||(this._state&U.TOUCH_DOLLY_OFFSET)===U.TOUCH_DOLLY_OFFSET||(this._state&U.TOUCH_DOLLY_ROTATE)===U.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&U.ZOOM)===U.ZOOM||(this._state&U.TOUCH_ZOOM)===U.TOUCH_ZOOM||(this._state&U.TOUCH_ZOOM_TRUCK)===U.TOUCH_ZOOM_TRUCK||(this._state&U.TOUCH_ZOOM_OFFSET)===U.TOUCH_ZOOM_OFFSET||(this._state&U.TOUCH_ZOOM_ROTATE)===U.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&U.OFFSET)===U.OFFSET||(this._state&U.TOUCH_OFFSET)===U.TOUCH_OFFSET||(this._state&U.TOUCH_DOLLY_OFFSET)===U.TOUCH_DOLLY_OFFSET||(this._state&U.TOUCH_ZOOM_OFFSET)===U.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})}},_=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,$(this._activePointers,a);let e=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,t=e?-e.deltaX:n.x-a.x,r=e?-e.deltaY:n.y-a.y;if(n.copy(a),((this._state&U.ROTATE)===U.ROTATE||(this._state&U.TOUCH_ROTATE)===U.TOUCH_ROTATE||(this._state&U.TOUCH_DOLLY_ROTATE)===U.TOUCH_DOLLY_ROTATE||(this._state&U.TOUCH_ZOOM_ROTATE)===U.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(t,r),this._isUserControllingRotate=!0),(this._state&U.DOLLY)===U.DOLLY||(this._state&U.ZOOM)===U.ZOOM){let e=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,t=this.dollyToCursor?-((i.y-this._elementRect.y)/this._elementRect.height*2)+1:0,n=this.dollyDragInverted?-1:1;(this._state&U.DOLLY)===U.DOLLY?(this._dollyInternal(n*r*K,e,t),this._isUserControllingDolly=!0):(this._zoomInternal(n*r*K,e,t),this._isUserControllingZoom=!0)}if((this._state&U.TOUCH_DOLLY)===U.TOUCH_DOLLY||(this._state&U.TOUCH_ZOOM)===U.TOUCH_ZOOM||(this._state&U.TOUCH_DOLLY_TRUCK)===U.TOUCH_DOLLY_TRUCK||(this._state&U.TOUCH_ZOOM_TRUCK)===U.TOUCH_ZOOM_TRUCK||(this._state&U.TOUCH_DOLLY_OFFSET)===U.TOUCH_DOLLY_OFFSET||(this._state&U.TOUCH_ZOOM_OFFSET)===U.TOUCH_ZOOM_OFFSET||(this._state&U.TOUCH_DOLLY_ROTATE)===U.TOUCH_DOLLY_ROTATE||(this._state&U.TOUCH_ZOOM_ROTATE)===U.TOUCH_ZOOM_ROTATE){let e=a.x-this._activePointers[1].clientX,t=a.y-this._activePointers[1].clientY,i=Math.sqrt(e*e+t*t),r=o.y-i;o.set(0,i);let s=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,l=this.dollyToCursor?-((n.y-this._elementRect.y)/this._elementRect.height*2)+1:0;(this._state&U.TOUCH_DOLLY)===U.TOUCH_DOLLY||(this._state&U.TOUCH_DOLLY_ROTATE)===U.TOUCH_DOLLY_ROTATE||(this._state&U.TOUCH_DOLLY_TRUCK)===U.TOUCH_DOLLY_TRUCK||(this._state&U.TOUCH_DOLLY_OFFSET)===U.TOUCH_DOLLY_OFFSET?(this._dollyInternal(r*K,s,l),this._isUserControllingDolly=!0):(this._zoomInternal(r*K,s,l),this._isUserControllingZoom=!0)}((this._state&U.TRUCK)===U.TRUCK||(this._state&U.TOUCH_TRUCK)===U.TOUCH_TRUCK||(this._state&U.TOUCH_DOLLY_TRUCK)===U.TOUCH_DOLLY_TRUCK||(this._state&U.TOUCH_ZOOM_TRUCK)===U.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(t,r,!1),this._isUserControllingTruck=!0),((this._state&U.OFFSET)===U.OFFSET||(this._state&U.TOUCH_OFFSET)===U.TOUCH_OFFSET||(this._state&U.TOUCH_DOLLY_OFFSET)===U.TOUCH_DOLLY_OFFSET||(this._state&U.TOUCH_ZOOM_OFFSET)===U.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(t,r,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},g=()=>{$(this._activePointers,a),n.copy(a),this._dragNeedsUpdate=!1,(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",y),this._domElement.ownerDocument.addEventListener("pointerlockerror",v),this._domElement.ownerDocument.addEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),m())},this.unlockPointer=()=>{var e,t,i;null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),null===(e=this._domElement)||void 0===e||e.ownerDocument.exitPointerLock(),null===(t=this._domElement)||void 0===t||t.ownerDocument.removeEventListener("pointerlockchange",y),null===(i=this._domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerlockerror",v),this.cancel()};let y=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},v=()=>{this.unlockPointer()};this._addAllEventListeners=e=>{this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",c),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",c),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",h,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",v))},this.cancel=()=>{this._state!==U.NONE&&(this._state=U.NONE,this._activePointers.length=0,g())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){(this._spherical.radius!==e||this._sphericalEnd.radius!==e)&&(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){(this._spherical.theta!==e||this._sphericalEnd.theta!==e)&&(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){(this._spherical.phi!==e||this._sphericalEnd.phi!==e)&&(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=I(e.width,0,1),this._interactiveArea.height=I(e.height,0,1),this._interactiveArea.x=I(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=I(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;let r=I(e,this.minAzimuthAngle,this.maxAzimuthAngle),n=I(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=n,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let s=!i||H(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&H(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=L.NONE,this._changedDolly=0,this._dollyToNoClamp(I(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){let i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){let t=this._collisionTest(),r=H(t,this._spherical.radius);if(!(i>e)&&r)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,t)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);let r=!t||H(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(u).multiplyScalar(e)),t||this._target.copy(this._targetEnd);let i=!t||H(this._target.x,this._targetEnd.x,this.restThreshold)&&H(this._target.y,this._targetEnd.y,this.restThreshold)&&H(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=I(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);let i=!t||H(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),d.setFromMatrixColumn(this._camera.matrix,0),f.setFromMatrixColumn(this._camera.matrix,1),d.multiplyScalar(e),f.multiplyScalar(-t);let r=l.copy(d).add(f),n=c.copy(this._targetEnd).add(r);return this.moveTo(n.x,n.y,n.z,i)}forward(e,t=!1){l.setFromMatrixColumn(this._camera.matrix,0),l.crossVectors(this._camera.up,l),l.multiplyScalar(e);let i=c.copy(this._targetEnd).add(l);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return l.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+l.x,this._targetEnd.y+l.y,this._targetEnd.z+l.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;let n=l.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,n,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);let s=!r||H(this._target.x,this._targetEnd.x,this.restThreshold)&&H(this._target.y,this._targetEnd.y,this.restThreshold)&&H(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}lookInDirectionOf(e,t,i,r=!1){let n=l.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(n.x,n.y,n.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:n=0,paddingBottom:a=0,paddingTop:h=0}={}){let u=[],d=e.isBox3?v.copy(e):v.setFromObject(e);d.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());let f=N(this._sphericalEnd.theta,D),p=N(this._sphericalEnd.phi,D);u.push(this.rotateTo(f,p,t));let m=l.setFromSpherical(this._sphericalEnd).normalize(),_=E.setFromUnitVectors(m,o),g=H(Math.abs(m.y),1);g&&_.multiply(w.setFromAxisAngle(s,f)),_.multiply(this._yAxisUpSpaceInverse);let y=b.makeEmpty();c.copy(d.min).applyQuaternion(_),y.expandByPoint(c),c.copy(d.min).setX(d.max.x).applyQuaternion(_),y.expandByPoint(c),c.copy(d.min).setY(d.max.y).applyQuaternion(_),y.expandByPoint(c),c.copy(d.max).setZ(d.min.z).applyQuaternion(_),y.expandByPoint(c),c.copy(d.min).setZ(d.max.z).applyQuaternion(_),y.expandByPoint(c),c.copy(d.max).setY(d.min.y).applyQuaternion(_),y.expandByPoint(c),c.copy(d.max).setX(d.min.x).applyQuaternion(_),y.expandByPoint(c),c.copy(d.max).applyQuaternion(_),y.expandByPoint(c),y.min.x-=r,y.min.y-=a,y.max.x+=n,y.max.y+=h,_.setFromUnitVectors(o,m),g&&_.premultiply(w.invert()),_.premultiply(this._yAxisUpSpace);let x=y.getSize(l),O=y.getCenter(c).applyQuaternion(_);if(R(this._camera)){let e=this.getDistanceToFitBox(x.x,x.y,x.z,i);u.push(this.moveTo(O.x,O.y,O.z,t)),u.push(this.dollyTo(e,t)),u.push(this.setFocalOffset(0,0,0,t))}else if(z(this._camera)){let e=this._camera,r=e.right-e.left,n=e.top-e.bottom,s=i?Math.max(r/x.x,n/x.y):Math.min(r/x.x,n/x.y);u.push(this.moveTo(O.x,O.y,O.z,t)),u.push(this.zoomTo(s,t)),u.push(this.setFocalOffset(0,0,0,t))}return Promise.all(u)}fitToSphere(e,t){let i=[],r="isObject3D"in e?G.createBoundingSphere(e,x):x.copy(e);if(i.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),R(this._camera)){let e=this.getDistanceToFitSphere(r.radius);i.push(this.dollyTo(e,t))}else if(z(this._camera)){let e=this._camera.right-this._camera.left,n=this._camera.top-this._camera.bottom,s=2*r.radius,o=Math.min(e/s,n/s);i.push(this.zoomTo(o,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,n,s,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=L.NONE,this._changedDolly=0;let a=c.set(r,n,s),h=l.set(e,t,i);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(h.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let u=!o||H(this._target.x,this._targetEnd.x,this.restThreshold)&&H(this._target.y,this._targetEnd.y,this.restThreshold)&&H(this._target.z,this._targetEnd.z,this.restThreshold)&&H(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&H(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&H(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,i,r,n,s,o,a,u,d,f,p,m,_=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=L.NONE,this._changedDolly=0;let v=l.set(r,n,s),b=c.set(e,t,i);g.setFromVector3(b.sub(v).applyQuaternion(this._yAxisUpSpace));let x=h.set(d,f,p),E=c.set(o,a,u);y.setFromVector3(E.sub(x).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(v.lerp(x,m));let w=y.theta-g.theta,O=y.phi-g.phi,T=y.radius-g.radius;this._sphericalEnd.set(g.radius+T*m,g.phi+O*m,g.theta+w*m),this.normalizeRotations(),this._needsUpdate=!0,_||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let C=!_||H(this._target.x,this._targetEnd.x,this.restThreshold)&&H(this._target.y,this._targetEnd.y,this.restThreshold)&&H(this._target.z,this._targetEnd.z,this.restThreshold)&&H(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&H(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&H(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(C)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){let n=this.getPosition(l),s=this.setLookAt(n.x,n.y,n.z,e,t,i,r);return this._sphericalEnd.phi=I(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),s}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);let n=!r||H(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&H(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&H(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),d.setFromMatrixColumn(this._camera.matrixWorldInverse,0),f.setFromMatrixColumn(this._camera.matrixWorldInverse,1),p.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let r=l.set(e,t,i),n=r.distanceTo(this._camera.position),s=r.sub(this._camera.position);d.multiplyScalar(s.x),f.multiplyScalar(s.y),p.multiplyScalar(s.z),l.copy(d).add(f).add(p),l.z=l.z+n,this.dollyTo(n,!1),this.setFocalOffset(-l.x,l.y,-l.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,n){if(null===e){this._viewport=null;return}this._viewport=this._viewport||new r.Vector4,"number"==typeof e?this._viewport.set(e,t,i,n):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(W(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let n=e/t,s=this._camera.getEffectiveFOV()*F,o=this._camera.aspect;return .5*((r?n>o:n<o)?t:e/o)/Math.tan(.5*s)+.5*i}getDistanceToFitSphere(e){if(W(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let t=this._camera.getEffectiveFOV()*F,i=2*Math.atan(Math.tan(.5*t)*this._camera.aspect);return e/Math.sin(.5*(1<this._camera.aspect?t:i))}getTarget(e,t=!0){return(e&&e.isVector3?e:new r.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new r.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new r.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new r.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%j,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=j),this._spherical.theta+=j*Math.round((this._sphericalEnd.theta-this._spherical.theta)/j)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!H(this._camera.up.x,this._cameraUp0.x)||!H(this._camera.up.y,this._cameraUp0.y)||!H(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);let e=this.getPosition(l);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}return Promise.all([this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)])}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,s),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){let e=l.subVectors(this._target,this._camera.position).normalize(),t=c.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();let i=this.getPosition(l);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){let t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,n=m.subVectors(this._targetEnd,this._target),s=_.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(V(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{let t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=B(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,t,1/0,e),this._needsUpdate=!0}if(V(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{let t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=B(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,t,1/0,e),this._needsUpdate=!0}if(V(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{let t=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=B(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,t,this.maxSpeed,e),this._needsUpdate=!0}if(V(n.x)&&V(n.y)&&V(n.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{let t=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;q(this._target,this._targetEnd,this._targetVelocity,t,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(V(s.x)&&V(s.y)&&V(s.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{let t=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;q(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,t,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(V(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{let t=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=B(this._zoom,this._zoomEnd,this._zoomVelocity,t,1/0,e)}if(this.dollyToCursor){if(R(this._camera)&&0!==this._changedDolly){let e=this._spherical.radius-this._lastDistance,t=this._camera,i=this._getCameraDirection(u),r=l.copy(i).cross(t.up).normalize();0===r.lengthSq()&&(r.x=1);let n=c.crossVectors(r,i),s=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*F*.5),o=(this._sphericalEnd.radius-e-this._sphericalEnd.radius)/this._sphericalEnd.radius,a=h.copy(this._targetEnd).add(r.multiplyScalar(this._dollyControlCoord.x*s*t.aspect)).add(n.multiplyScalar(this._dollyControlCoord.y*s)),d=l.copy(this._targetEnd).lerp(a,o),f=this._lastDollyDirection===L.IN&&this._spherical.radius<=this.minDistance,p=this._lastDollyDirection===L.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(f||p)){this._sphericalEnd.radius-=e,this._spherical.radius-=e;let t=c.copy(i).multiplyScalar(-e);d.add(t)}this._boundary.clampPoint(d,d);let m=c.subVectors(d,this._targetEnd);this._targetEnd.copy(d),this._target.add(m),this._changedDolly-=e,V(this._changedDolly)&&(this._changedDolly=0)}else if(z(this._camera)&&0!==this._changedZoom){let e=this._zoom-this._lastZoom,t=this._camera,i=l.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),r=c.set(0,0,-1).applyQuaternion(t.quaternion),n=h.copy(i).add(r.multiplyScalar(-i.dot(t.up))),s=-(this._zoom-e-this._zoom)/this._zoom,o=this._getCameraDirection(u),a=this._targetEnd.dot(o),d=l.copy(this._targetEnd).lerp(n,s),f=d.dot(o),p=o.multiplyScalar(f-a);d.sub(p),this._boundary.clampPoint(d,d);let m=c.subVectors(d,this._targetEnd);this._targetEnd.copy(d),this._target.add(m),this._changedZoom-=e,V(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;let a=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,a),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),V(this._focalOffset.x)&&V(this._focalOffset.y)&&V(this._focalOffset.z)||(this._camera.updateMatrixWorld(),d.setFromMatrixColumn(this._camera.matrix,0),f.setFromMatrixColumn(this._camera.matrix,1),p.setFromMatrixColumn(this._camera.matrix,2),d.multiplyScalar(this._focalOffset.x),f.multiplyScalar(-this._focalOffset.y),p.multiplyScalar(this._focalOffset.z),l.copy(d).add(f).add(p),this._camera.position.add(l)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),l.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let g=this._needsUpdate;return g&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):g?(this.dispatchEvent({type:"update"}),V(t,this.restThreshold)&&V(i,this.restThreshold)&&V(r,this.restThreshold)&&V(n.x,this.restThreshold)&&V(n.y,this.restThreshold)&&V(n.z,this.restThreshold)&&V(s.x,this.restThreshold)&&V(s.y,this.restThreshold)&&V(s.z,this.restThreshold)&&V(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!g&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=g,this._needsUpdate=!1,g}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Y(this.maxDistance),minZoom:this.minZoom,maxZoom:Y(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Y(this.maxPolarAngle),minAzimuthAngle:Y(this.minAzimuthAngle),maxAzimuthAngle:Y(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:l.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){let i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Z(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Z(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Z(i.maxPolarAngle),this.minAzimuthAngle=Z(i.minAzimuthAngle),this.maxAzimuthAngle=Z(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),g.setFromVector3(l.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(g.theta,g.phi,t),this.dollyTo(g.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version","2.9.0"),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){let r=t.lengthSq();if(0===r)return e;let n=c.copy(t).add(e),s=this._boundary.clampPoint(n,h).sub(n),o=s.lengthSq();if(0===o)return e.add(t);if(o===r)return e;if(0===i)return e.add(t).add(s);{let r=1+i*o/t.dot(s);return e.add(c.copy(t).multiplyScalar(r)).add(s.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(R(this._camera)){let e=this._camera,t=e.near,i=Math.tan(.5*(e.getEffectiveFOV()*F))*t,r=i*e.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(z(this._camera)){let e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,n=e.top*t,s=e.bottom*t;this._nearPlaneCorners[0].set(i,n,0),this._nearPlaneCorners[1].set(r,n,0),this._nearPlaneCorners[2].set(r,s,0),this._nearPlaneCorners[3].set(i,s,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||W(this._camera,"_collisionTest"))return e;let t=this._getTargetDirection(u);O.lookAt(n,t,this._camera.up);for(let i=0;i<4;i++){let r=c.copy(this._nearPlaneCorners[i]);r.applyMatrix4(O);let n=h.addVectors(this._target,r);T.set(n,t),T.far=this._spherical.radius+1;let s=T.intersectObjects(this.colliderMeshes);0!==s.length&&s[0].distance<e&&(e=s[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;let t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{let t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new r.Sphere){let i=t.center;v.makeEmpty(),e.traverseVisible(e=>{e.isMesh&&v.expandByObject(e)}),v.getCenter(i);let n=0;return e.traverseVisible(e=>{if(!e.isMesh)return;let t=e.geometry.clone();t.applyMatrix4(e.matrixWorld);let r=t.attributes.position;for(let e=0,t=r.count;e<t;e++)l.fromBufferAttribute(r,e),n=Math.max(n,i.distanceToSquared(l))}),t.radius=Math.sqrt(n),t}}let J=(0,M.forwardRef)((e,t)=>{(0,M.useMemo)(()=>{let e={Box3:S.Box3,MathUtils:{clamp:S.MathUtils.clamp},Matrix4:S.Matrix4,Quaternion:S.Quaternion,Raycaster:S.Raycaster,Sphere:S.Sphere,Spherical:S.Spherical,Vector2:S.Vector2,Vector3:S.Vector3,Vector4:S.Vector4};G.install({THREE:e}),(0,A.e)({CameraControlsImpl:G})},[]);let{camera:i,domElement:r,makeDefault:n,onStart:s,onEnd:o,onChange:a,regress:l,...c}=e,h=(0,A.A)(e=>e.camera),u=(0,A.A)(e=>e.gl),d=(0,A.A)(e=>e.invalidate),f=(0,A.A)(e=>e.events),p=(0,A.A)(e=>e.setEvents),m=(0,A.A)(e=>e.set),_=(0,A.A)(e=>e.get),g=(0,A.A)(e=>e.performance),y=i||h,v=r||f.connected||u.domElement,b=(0,M.useMemo)(()=>new G(y),[y]);return(0,A.C)((e,t)=>{b.enabled&&b.update(t)},-1),(0,M.useEffect)(()=>(b.connect(v),()=>void b.disconnect()),[v,b]),(0,M.useEffect)(()=>{let e=e=>{d(),l&&g.regress(),a&&a(e)},t=e=>{s&&s(e)},i=e=>{o&&o(e)};return b.addEventListener("update",e),b.addEventListener("controlstart",t),b.addEventListener("controlend",i),b.addEventListener("control",e),b.addEventListener("transitionstart",e),b.addEventListener("wake",e),()=>{b.removeEventListener("update",e),b.removeEventListener("controlstart",t),b.removeEventListener("controlend",i),b.removeEventListener("control",e),b.removeEventListener("transitionstart",e),b.removeEventListener("wake",e)}},[b,s,o,d,p,l,a]),(0,M.useEffect)(()=>{if(n){let e=_().controls;return m({controls:b}),()=>m({controls:e})}},[n,b]),M.createElement("primitive",(0,P.A)({ref:t,object:b},c))})},63197:(e,t,i)=>{"use strict";i.d(t,{x:()=>c});var r=i(85407),n=i(12115),s=i(27274),o=i(60846);let a=parseInt(s.REVISION.replace(/\D+/g,"")),l=function(e,t,i,r){let n=class extends s.ShaderMaterial{constructor(r={}){let n=Object.entries(e);super({uniforms:n.reduce((e,[t,i])=>{let r=s.UniformsUtils.clone({[t]:{value:i}});return{...e,...r}},{}),vertexShader:t,fragmentShader:i}),this.key="",n.forEach(([e])=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t})),Object.assign(this,r)}};return n.key=s.MathUtils.generateUUID(),n}({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new s.Color,sectionColor:new s.Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new s.Vector3,worldPlanePosition:new s.Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${a>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),c=n.forwardRef(({args:e,cellColor:t="#000000",sectionColor:i="#2080ff",cellSize:a=.5,sectionSize:c=1,followCamera:h=!1,infiniteGrid:u=!1,fadeDistance:d=100,fadeStrength:f=1,fadeFrom:p=1,cellThickness:m=.5,sectionThickness:_=1,side:g=s.BackSide,...y},v)=>{(0,o.e)({GridMaterial:l});let b=n.useRef(null);n.useImperativeHandle(v,()=>b.current,[]);let x=new s.Plane,E=new s.Vector3(0,1,0),w=new s.Vector3(0,0,0);return(0,o.C)(e=>{x.setFromNormalAndCoplanarPoint(E,w).applyMatrix4(b.current.matrixWorld);let t=b.current.material,i=t.uniforms.worldCamProjPosition,r=t.uniforms.worldPlanePosition;x.projectPoint(e.camera.position,i.value),r.value.set(0,0,0).applyMatrix4(b.current.matrixWorld)}),n.createElement("mesh",(0,r.A)({ref:b,frustumCulled:!1},y),n.createElement("gridMaterial",(0,r.A)({transparent:!0,"extensions-derivatives":!0,side:g},{cellSize:a,sectionSize:c,cellColor:t,sectionColor:i,cellThickness:m,sectionThickness:_},{fadeDistance:d,fadeStrength:f,fadeFrom:p,infiniteGrid:u,followCamera:h})),n.createElement("planeGeometry",{args:e}))})},45393:(e,t,i)=>{"use strict";i.d(t,{u:()=>l});var r=i(85407),n=i(12115),s=i(60846),o=i(27274);let a=e=>"function"==typeof e,l=n.forwardRef(({envMap:e,resolution:t=256,frames:i=1/0,makeDefault:l,children:c,...h},u)=>{let d=(0,s.A)(({set:e})=>e),f=(0,s.A)(({camera:e})=>e),p=(0,s.A)(({size:e})=>e),m=n.useRef(null);n.useImperativeHandle(u,()=>m.current,[]);let _=n.useRef(null),g=function(e,t,i){let r=(0,s.A)(e=>e.size),a=(0,s.A)(e=>e.viewport),l="number"==typeof e?e:r.width*a.dpr,c=r.height*a.dpr,{samples:h=0,depth:u,...d}=("number"==typeof e?void 0:e)||{},f=n.useMemo(()=>{let e=new o.WebGLRenderTarget(l,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,type:o.HalfFloatType,...d});return u&&(e.depthTexture=new o.DepthTexture(l,c,o.FloatType)),e.samples=h,e},[]);return n.useLayoutEffect(()=>{f.setSize(l,c),h&&(f.samples=h)},[h,f,l,c]),n.useEffect(()=>()=>f.dispose(),[]),f}(t);n.useLayoutEffect(()=>{h.manual||(m.current.aspect=p.width/p.height)},[p,h]),n.useLayoutEffect(()=>{m.current.updateProjectionMatrix()});let y=0,v=null,b=a(c);return(0,s.C)(t=>{b&&(i===1/0||y<i)&&(_.current.visible=!1,t.gl.setRenderTarget(g),v=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,m.current),t.scene.background=v,t.gl.setRenderTarget(null),_.current.visible=!0,y++)}),n.useLayoutEffect(()=>{if(l)return d(()=>({camera:m.current})),()=>d(()=>({camera:f}))},[m,l,d]),n.createElement(n.Fragment,null,n.createElement("perspectiveCamera",(0,r.A)({ref:m},h),!b&&c),n.createElement("group",{ref:_},b&&c(g.texture)))})},39884:(e,t,i)=>{"use strict";let r,n;i.d(t,{E:()=>v});var s=i(85407),o=i(12115),a=i(12669),l=i(27274),c=i(60846);let h=new l.Vector3,u=new l.Vector3,d=new l.Vector3,f=new l.Vector2;function p(e,t,i){let r=h.setFromMatrixPosition(e.matrixWorld);r.project(t);let n=i.width/2,s=i.height/2;return[r.x*n+n,-(r.y*s)+s]}let m=e=>1e-10>Math.abs(e)?0:e;function _(e,t,i=""){let r="matrix3d(";for(let i=0;16!==i;i++)r+=m(t[i]*e.elements[i])+(15!==i?",":")");return i+r}let g=(r=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>_(e,r)),y=(n=e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1],(e,t)=>_(e,n(t),"translate(-50%,-50%)")),v=o.forwardRef(({children:e,eps:t=.001,style:i,className:r,prepend:n,center:_,fullscreen:v,portal:b,distanceFactor:x,sprite:E=!1,transform:w=!1,occlude:O,onOcclude:T,castShadow:C,receiveShadow:P,material:S,geometry:M,zIndexRange:A=[0x1000037,0],calculatePosition:k=p,as:U="div",wrapperClass:L,pointerEvents:R="auto",...z},j)=>{let{gl:D,camera:F,scene:I,size:V,raycaster:H,events:N,viewport:Y}=(0,c.A)(),[Z]=o.useState(()=>document.createElement(U)),B=o.useRef(),q=o.useRef(null),$=o.useRef(0),W=o.useRef([0,0]),Q=o.useRef(null),K=o.useRef(null),X=(null==b?void 0:b.current)||N.connected||D.domElement.parentNode,G=o.useRef(null),J=o.useRef(!1),ee=o.useMemo(()=>O&&"blending"!==O||Array.isArray(O)&&O.length&&function(e){return e&&"object"==typeof e&&"current"in e}(O[0]),[O]);o.useLayoutEffect(()=>{let e=D.domElement;O&&"blending"===O?(e.style.zIndex=`${Math.floor(A[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[O]),o.useLayoutEffect(()=>{if(q.current){let e=B.current=a.createRoot(Z);if(I.updateMatrixWorld(),w)Z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let e=k(q.current,F,V);Z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return X&&(n?X.prepend(Z):X.appendChild(Z)),()=>{X&&X.removeChild(Z),e.unmount()}}},[X,w]),o.useLayoutEffect(()=>{L&&(Z.className=L)},[L]);let et=o.useMemo(()=>w?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:_?"translate3d(-50%,-50%,0)":"none",...v&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...i},[i,_,v,V,w]),ei=o.useMemo(()=>({position:"absolute",pointerEvents:R}),[R]);o.useLayoutEffect(()=>{var t,n;J.current=!1,w?null==(t=B.current)||t.render(o.createElement("div",{ref:Q,style:et},o.createElement("div",{ref:K,style:ei},o.createElement("div",{ref:j,className:r,style:i,children:e})))):null==(n=B.current)||n.render(o.createElement("div",{ref:j,style:et,className:r,children:e}))});let er=o.useRef(!0);(0,c.C)(e=>{if(q.current){F.updateMatrixWorld(),q.current.updateWorldMatrix(!0,!1);let e=w?W.current:k(q.current,F,V);if(w||Math.abs($.current-F.zoom)>t||Math.abs(W.current[0]-e[0])>t||Math.abs(W.current[1]-e[1])>t){let t=function(e,t){let i=h.setFromMatrixPosition(e.matrixWorld),r=u.setFromMatrixPosition(t.matrixWorld),n=i.sub(r),s=t.getWorldDirection(d);return n.angleTo(s)>Math.PI/2}(q.current,F),i=!1;ee&&(Array.isArray(O)?i=O.map(e=>e.current):"blending"!==O&&(i=[I]));let r=er.current;if(i){let e=function(e,t,i,r){let n=h.setFromMatrixPosition(e.matrixWorld),s=n.clone();s.project(t),f.set(s.x,s.y),i.setFromCamera(f,t);let o=i.intersectObjects(r,!0);if(o.length){let e=o[0].distance;return n.distanceTo(i.ray.origin)<e}return!0}(q.current,F,H,i);er.current=e&&!t}else er.current=!t;r!==er.current&&(T?T(!er.current):Z.style.display=er.current?"block":"none");let n=Math.floor(A[0]/2),s=O?ee?[A[0],n]:[n-1,0]:A;if(Z.style.zIndex=`${function(e,t,i){if(t instanceof l.PerspectiveCamera||t instanceof l.OrthographicCamera){let r=h.setFromMatrixPosition(e.matrixWorld),n=u.setFromMatrixPosition(t.matrixWorld),s=r.distanceTo(n),o=(i[1]-i[0])/(t.far-t.near),a=i[1]-o*t.far;return Math.round(o*s+a)}}(q.current,F,s)}`,w){let[e,t]=[V.width/2,V.height/2],i=F.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:n,left:s,bottom:o,right:a}=F,l=g(F.matrixWorldInverse),c=r?`scale(${i})translate(${m(-(a+s)/2)}px,${m((n+o)/2)}px)`:`translateZ(${i}px)`,h=q.current.matrixWorld;E&&((h=F.matrixWorldInverse.clone().transpose().copyPosition(h).scale(q.current.scale)).elements[3]=h.elements[7]=h.elements[11]=0,h.elements[15]=1),Z.style.width=V.width+"px",Z.style.height=V.height+"px",Z.style.perspective=r?"":`${i}px`,Q.current&&K.current&&(Q.current.style.transform=`${c}${l}translate(${e}px,${t}px)`,K.current.style.transform=y(h,1/((x||10)/400)))}else{let t=void 0===x?1:function(e,t){if(t instanceof l.OrthographicCamera)return t.zoom;if(!(t instanceof l.PerspectiveCamera))return 1;{let i=h.setFromMatrixPosition(e.matrixWorld),r=u.setFromMatrixPosition(t.matrixWorld);return 1/(2*Math.tan(t.fov*Math.PI/180/2)*i.distanceTo(r))}}(q.current,F)*x;Z.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}W.current=e,$.current=F.zoom}}if(!ee&&G.current&&!J.current){if(w){if(Q.current){let e=Q.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){let{isOrthographicCamera:t}=F;if(t||M)z.scale&&(Array.isArray(z.scale)?z.scale instanceof l.Vector3?G.current.scale.copy(z.scale.clone().divideScalar(1)):G.current.scale.set(1/z.scale[0],1/z.scale[1],1/z.scale[2]):G.current.scale.setScalar(1/z.scale));else{let t=(x||10)/400,i=e.clientWidth*t,r=e.clientHeight*t;G.current.scale.set(i,r,1)}J.current=!0}}}else{let t=Z.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){let e=1/Y.factor,i=t.clientWidth*e,r=t.clientHeight*e;G.current.scale.set(i,r,1),J.current=!0}G.current.lookAt(e.camera.position)}}});let en=o.useMemo(()=>({vertexShader:w?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[w]);return o.createElement("group",(0,s.A)({},z,{ref:q}),O&&!ee&&o.createElement("mesh",{castShadow:C,receiveShadow:P,ref:G},M||o.createElement("planeGeometry",null),S||o.createElement("shaderMaterial",{side:l.DoubleSide,vertexShader:en.vertexShader,fragmentShader:en.fragmentShader})))})},60846:(e,t,i)=>{"use strict";let r,n,s,o,a;i.d(t,{A:()=>ek,B:()=>en,C:()=>eU,E:()=>es,a:()=>ei,b:()=>et,c:()=>eC,d:()=>eV,e:()=>D,f:()=>eN,i:()=>ee,u:()=>er});var l,c,h=i(27274),u=i(12115),d=i(26188),f=i(18010);let p=e=>{let t;let i=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),i.forEach(i=>i(t,e))}},n=()=>t,s={setState:r,getState:n,getInitialState:()=>o,subscribe:e=>(i.add(e),()=>i.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},o=t=e(r,n,s);return s},m=e=>e?p(e):p,{useDebugValue:_}=u,{useSyncExternalStoreWithSelector:g}=f,y=e=>e,v=(e,t)=>{let i=m(e),r=(e,r=t)=>(function(e,t=y,i){let r=g(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,i);return _(r),r})(i,e,r);return Object.assign(r,i),r},b=(e,t)=>e?v(e,t):v;var x=i(42353),E=i(5193),w=i.n(E),O=i(21065),T=i(95155);let C=e=>"object"==typeof e&&"function"==typeof e.then,P=[];function S(e,t,i=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n++)if(!i(e[n],t[n]))return!1;return!0}function M(e,t=null,i=!1,r={}){for(let n of(null===t&&(t=[e]),P))if(S(t,n.keys,n.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(n,"error"))throw n.error;if(Object.prototype.hasOwnProperty.call(n,"response"))return r.lifespan&&r.lifespan>0&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.remove,r.lifespan)),n.response;if(!i)throw n.promise}let n={keys:t,equal:r.equal,remove:()=>{let e=P.indexOf(n);-1!==e&&P.splice(e,1)},promise:(C(e)?e:e(...t)).then(e=>{n.response=e,r.lifespan&&r.lifespan>0&&(n.timeout=setTimeout(n.remove,r.lifespan))}).catch(e=>n.error=e)};if(P.push(n),!i)throw n.promise}let A=(e,t,i)=>M(e,t,!1,i),k=(e,t,i)=>void M(e,t,!0,i),U=e=>{if(void 0===e||0===e.length)P.splice(0,P.length);else{let t=P.find(t=>S(e,t.keys,t.equal));t&&t.remove()}};i(2818);let L=w(),R={},z=0,j=e=>"function"==typeof e;function D(e){if(j(e)){let t=`${z++}`;return R[t]=e,t}Object.assign(R,e)}function F(e,t){let i=`${e[0].toUpperCase()}${e.slice(1)}`,r=R[i];if("primitive"!==e&&!r)throw Error(`R3F: ${i} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw Error("R3F: The args prop must be an array!")}function I(e){if(e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?ef(e.parent,e):ew(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,eE(e)}}function V(e,t,i){let r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var n,s;let e=R[`${t.type[0].toUpperCase()}${t.type.slice(1)}`];t.object=null!=(n=t.props.object)?n:new e(...null!=(s=t.props.args)?s:[]),t.object.__r3f=t,ex(t.object,t.props)}if(t.props.attach)ef(e,t);else if(ew(t.object)&&ew(e.object)){let r=e.object.children.indexOf(null==i?void 0:i.object);i&&-1!==r?(t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})):e.object.add(t.object)}for(let e of t.children)V(t,e);eE(t)}}function H(e,t){t&&(t.parent=e,e.children.push(t),V(e,t))}function N(e,t,i){if(!t||!i)return;t.parent=e;let r=e.children.indexOf(i);-1!==r?e.children.splice(r,0,t):e.children.push(t),V(e,t,i)}function Y(e){if("function"==typeof e.dispose){let t=()=>{try{e.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?t():(0,O.unstable_scheduleCallback)(O.unstable_IdlePriority,t)}}function Z(e,t,i){if(!t)return;t.parent=null;let r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?ep(e,t):ew(t.object)&&ew(e.object)&&(e.object.remove(t.object),function(e,t){let{internal:i}=e.getState();i.interaction=i.interaction.filter(e=>e!==t),i.initialHits=i.initialHits.filter(e=>e!==t),i.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&i.hovered.delete(r)}),i.capturedMap.forEach((e,r)=>{eT(i.capturedMap,t,e,r)})}(K(t),t.object));let n=null!==t.props.dispose&&!1!==i;for(let e=t.children.length-1;e>=0;e--){let i=t.children[e];Z(t,i,n)}t.children.length=0,delete t.object.__r3f,n&&"primitive"!==t.type&&"Scene"!==t.object.type&&Y(t.object),void 0===i&&eE(t)}let B=[],q=()=>console.warn("R3F: Text is not allowed in JSX! This could be stray whitespace or characters."),$={},W=d.NoEventPriority,Q=L({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,i){var r;return F(e,t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,eh(t.object,i,e,t)},removeChild:Z,appendChild:H,appendInitialChild:H,insertBefore:N,appendChildToContainer(e,t){let i=e.getState().scene.__r3f;t&&i&&H(i,t)},removeChildFromContainer(e,t){let i=e.getState().scene.__r3f;t&&i&&Z(i,t)},insertInContainerBefore(e,t,i){let r=e.getState().scene.__r3f;t&&i&&r&&N(r,t,i)},getRootHostContext:()=>$,getChildHostContext:()=>$,commitUpdate(e,t,i,r,n){var s,o,a;F(t,r);let l=!1;if("primitive"===e.type&&i.object!==r.object?l=!0:(null==(s=r.args)?void 0:s.length)!==(null==(o=i.args)?void 0:o.length)?l=!0:null!=(a=r.args)&&a.some((e,t)=>{var r;return e!==(null==(r=i.args)?void 0:r[t])})&&(l=!0),l)B.push([e,{...r},n]);else{let t=function(e,t){let i={};for(let r in t)if(!em.includes(r)&&!el.equ(t[r],e.props[r]))for(let e in i[r]=t[r],t)e.startsWith(`${r}-`)&&(i[e]=t[e]);for(let r in e.props){if(em.includes(r)||t.hasOwnProperty(r))continue;let{root:n,key:s}=eu(e.object,r);if(n.constructor&&0===n.constructor.length){let e=e_.get(n.constructor);e||(e=new n.constructor,e_.set(n.constructor,e)),i[s]=e[s]}else i[s]=0}return i}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),ex(e.object,t))}(null===n.sibling||(4&n.flags)==0)&&function(){for(let[e]of B){let t=e.parent;if(t)for(let i of(e.props.attach?ep(t,e):ew(e.object)&&ew(t.object)&&t.object.remove(e.object),e.children))i.props.attach?ep(e,i):ew(i.object)&&ew(e.object)&&e.object.remove(i.object);e.isHidden&&I(e),e.object.__r3f&&delete e.object.__r3f,"primitive"!==e.type&&Y(e.object)}for(let[i,r,n]of B){i.props=r;let s=i.parent;if(s){var e,t;let r=R[`${i.type[0].toUpperCase()}${i.type.slice(1)}`];for(let o of(i.object=null!=(e=i.props.object)?e:new r(...null!=(t=i.props.args)?t:[]),i.object.__r3f=i,!function(e,t){for(let i of[e,e.alternate])if(null!==i){if("function"==typeof i.ref){null==i.refCleanup||i.refCleanup();let e=i.ref(t);"function"==typeof e&&(i.refCleanup=e)}else i.ref&&(i.ref.current=t)}}(n,i.object),ex(i.object,i.props),i.props.attach?ef(s,i):ew(i.object)&&ew(s.object)&&s.object.add(i.object),i.children))o.props.attach?ef(i,o):ew(o.object)&&ew(i.object)&&i.object.add(o.object);eE(i)}}B.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>eh(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){if(!e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?ep(e.parent,e):ew(e.object)&&(e.object.visible=!1),e.isHidden=!0,eE(e)}},unhideInstance:I,createTextInstance:q,hideTextInstance:q,unhideTextInstance:q,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,setCurrentUpdatePriority(e){W=e},getCurrentUpdatePriority:()=>W,resolveUpdatePriority(){var e;if(W!==d.NoEventPriority)return W;switch("undefined"!=typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return d.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return d.ContinuousEventPriority;default:return d.DefaultEventPriority}},resetFormInstance(){}});function K(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}let X=e=>"colorSpace"in e||"outputColorSpace"in e,G=()=>{var e;return null!=(e=R.ColorManagement)?e:null};u.act;let J=e=>e&&e.isOrthographicCamera,ee=e=>e&&e.hasOwnProperty("current"),et="undefined"!=typeof window&&(null!=(l=window.document)&&l.createElement||(null==(c=window.navigator)?void 0:c.product)==="ReactNative")?u.useLayoutEffect:u.useEffect;function ei(e){let t=u.useRef(e);return et(()=>void(t.current=e),[e]),t}function er(){let e=(0,x.u5)(),t=(0,x.y3)();return u.useMemo(()=>({children:i})=>{let r=(0,x.Nz)(e,!0,e=>e.type===u.StrictMode)?u.StrictMode:u.Fragment;return(0,T.jsx)(r,{children:(0,T.jsx)(t,{children:i})})},[e,t])}function en({set:e}){return et(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class es extends u.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}function eo(e){var t;let i="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],i),e[1]):e}function ea(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}es.getDerivedStateFromError=()=>({error:!0});let el={obj:e=>e===Object(e)&&!el.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:i="shallow",objects:r="reference",strict:n=!0}={}){let s;if(typeof e!=typeof t||!!e!=!!t)return!1;if(el.str(e)||el.num(e)||el.boo(e))return e===t;let o=el.obj(e);if(o&&"reference"===r)return e===t;let a=el.arr(e);if(a&&"reference"===i)return e===t;if((a||o)&&e===t)return!0;for(s in e)if(!(s in t))return!1;if(o&&"shallow"===i&&"shallow"===r){for(s in n?t:e)if(!el.equ(e[s],t[s],{strict:n,objects:"reference"}))return!1}else for(s in n?t:e)if(e[s]!==t[s])return!1;if(el.und(s)){if(a&&0===e.length&&0===t.length||o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}},ec=["children","key","ref"];function eh(e,t,i,r){let n=null==e?void 0:e.__r3f;return!n&&(n={root:t,type:i,parent:null,children:[],props:function(e){let t={};for(let i in e)ec.includes(i)||(t[i]=e[i]);return t}(r),object:e,eventCount:0,handlers:{},isHidden:!1},e&&(e.__r3f=n,i&&ex(e,n.props))),n}function eu(e,t){var i;let r=e[t];if(!t.includes("-"))return{root:e,key:t,target:r};let n=t.split("-");return r=n.reduce((e,t)=>e[t],e),t=n.pop(),null!=(i=r)&&i.set||(e=n.reduce((e,t)=>e[t],e)),{root:e,key:t,target:r}}let ed=/-\d+$/;function ef(e,t){if(el.str(t.props.attach)){if(ed.test(t.props.attach)){let i=t.props.attach.replace(ed,""),{root:r,key:n}=eu(e.object,i);Array.isArray(r[n])||(r[n]=[])}let{root:i,key:r}=eu(e.object,t.props.attach);t.previousAttach=i[r],i[r]=t.object}else el.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function ep(e,t){if(el.str(t.props.attach)){let{root:i,key:r}=eu(e.object,t.props.attach),n=t.previousAttach;void 0===n?delete i[r]:i[r]=n}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}let em=[...ec,"args","dispose","attach","object","onUpdate","dispose"],e_=new Map,eg="srgb",ey="srgb-linear",ev=["map","emissiveMap","sheenTintMap","sheenColorMap","specularTintMap","specularColorMap","envMap"],eb=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ex(e,t){let i=e.__r3f,r=i&&K(i).getState(),n=null==i?void 0:i.eventCount;for(let n in t){let s=t[n];if(em.includes(n)||(i&&eb.test(n)&&("function"==typeof s?i.handlers[n]=s:delete i.handlers[n],i.eventCount=Object.keys(i.handlers).length),void 0===s))continue;let{root:o,key:a,target:l}=eu(e,n);if(X(o)&&("encoding"===a?(a="colorSpace",s=3001===s?eg:ey):"outputEncoding"===a&&(a="outputColorSpace",s=3001===s?eg:ey)),"function"==typeof(null==l?void 0:l.copy)&&l.copy===s.copy)l.copy(s);else if(l instanceof h.Layers&&s instanceof h.Layers)l.mask=s.mask;else if(null!=l&&l.set&&Array.isArray(s))l.fromArray?l.fromArray(s):l.set(...s);else if(null!=l&&l.set&&"object"!=typeof s){let e=l instanceof h.Color;!e&&l.setScalar&&"number"==typeof s?l.setScalar(s):l.set(s),G()||null!=r&&r.linear||!e||l.convertSRGBToLinear()}else o[a]=s,r&&!r.linear&&ev.includes(a)&&o[a]instanceof h.Texture&&o[a].format===h.RGBAFormat&&o[a].type===h.UnsignedByteType&&(X(o[a])?o[a].colorSpace="srgb":o[a].encoding=3001)}if(null!=i&&i.parent&&null!=r&&r.internal&&i.object instanceof h.Object3D&&n!==i.eventCount){let e=r.internal.interaction.indexOf(i.object);e>-1&&r.internal.interaction.splice(e,1),i.eventCount&&null!==i.object.raycast&&i.object instanceof h.Object3D&&r.internal.interaction.push(i.object)}return i&&void 0===i.props.attach&&(i.object instanceof h.BufferGeometry?i.props.attach="geometry":i.object instanceof h.Material&&(i.props.attach="material")),i&&eE(i),e}function eE(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);let i=null==(t=e.root)?void 0:null==t.getState?void 0:t.getState();i&&0===i.internal.frames&&i.invalidate()}let ew=e=>null==e?void 0:e.isObject3D;function eO(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function eT(e,t,i,r){let n=i.get(t);n&&(i.delete(t),0===i.size&&(e.delete(r),n.target.releasePointerCapture(r)))}function eC(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var i;return null==(i=e.__r3f)?void 0:i.handlers["onPointer"+t]}))}function i(t){let{internal:i}=e.getState();for(let e of i.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f;if(i.hovered.delete(eO(e)),null!=r&&r.eventCount){let i=r.handlers,n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let i=0;i<t.length;i++){let r=t[i].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(n){switch(n){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return t=>{let{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),i([]))})}}return function(s){let{onPointerMissed:o,internal:a}=e.getState();a.lastEvent.current=s;let l="onPointerMove"===n,c="onClick"===n||"onContextMenu"===n||"onDoubleClick"===n,u=function(t,i){let r=e.getState(),n=new Set,s=[],o=i?i(r.internal.interaction):r.internal.interaction;for(let e=0;e<o.length;e++){let t=ea(o[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let a=o.flatMap(function(e){let i=ea(e);if(!i||!i.events.enabled||null===i.raycaster.camera)return[];if(void 0===i.raycaster.camera){var r;null==i.events.compute||i.events.compute(t,i,null==(r=i.previousRoot)?void 0:r.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)}return i.raycaster.camera?i.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let i=ea(e.object),r=ea(t.object);return i&&r&&r.events.priority-i.events.priority||e.distance-t.distance}).filter(e=>{let t=eO(e);return!n.has(t)&&(n.add(t),!0)});for(let e of(r.events.filter&&(a=r.events.filter(a,r)),a)){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&s.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())n.has(eO(e.intersection))||s.push(e.intersection);return s}(s,l?t:void 0),d=c?function(t){let{internal:i}=e.getState(),r=t.offsetX-i.initialClick[0],n=t.offsetY-i.initialClick[1];return Math.round(Math.sqrt(r*r+n*n))}(s):0;"onPointerDown"===n&&(a.initialClick=[s.offsetX,s.offsetY],a.initialHits=u.map(e=>e.eventObject)),c&&!u.length&&d<=2&&(r(s,a.interaction),o&&o(s)),l&&i(u),function(e,t,r,n){if(e.length){let s={stopped:!1};for(let o of e){let a=ea(o.object);if(a){let{raycaster:l,pointer:c,camera:u,internal:d}=a,f=new h.Vector3(c.x,c.y,0).unproject(u),p=e=>{var t,i;return null!=(t=null==(i=d.capturedMap.get(e))?void 0:i.has(o.eventObject))&&t},m=e=>{let i={intersection:o,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(o.eventObject,i):d.capturedMap.set(e,new Map([[o.eventObject,i]])),t.target.setPointerCapture(e)},_=e=>{let t=d.capturedMap.get(e);t&&eT(d.capturedMap,o.eventObject,t,e)},g={};for(let e in t){let i=t[e];"function"!=typeof i&&(g[e]=i)}let y={...o,...g,pointer:c,intersections:e,stopped:s.stopped,delta:r,unprojectedPoint:f,ray:l.ray,camera:u,stopPropagation(){let r="pointerId"in t&&d.capturedMap.get(t.pointerId);(!r||r.has(o.eventObject))&&(y.stopped=s.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===o.eventObject)&&i([...e.slice(0,e.indexOf(o)),o]))},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:_},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:_},nativeEvent:t};if(n(y),!0===s.stopped)break}}}}(u,s,d,function(e){let t=e.eventObject,i=t.__r3f;if(!(null!=i&&i.eventCount))return;let o=i.handlers;if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){let t=eO(e),i=a.hovered.get(t);i?i.stopped&&e.stopPropagation():(a.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{let i=o[n];i?(!c||a.initialHits.includes(t))&&(r(s,a.interaction.filter(e=>!a.initialHits.includes(e))),i(e)):c&&a.initialHits.includes(t)&&r(s,a.interaction.filter(e=>!a.initialHits.includes(e)))}})}}}}let eP=e=>!!(null!=e&&e.render),eS=u.createContext(null),eM=(e,t)=>{let i=b((i,r)=>{let n;let s=new h.Vector3,o=new h.Vector3,a=new h.Vector3;function l(e=r().camera,t=o,i=r().size){let{width:n,height:c,top:u,left:d}=i,f=n/c;t instanceof h.Vector3?a.copy(t):a.set(...t);let p=e.getWorldPosition(s).distanceTo(a);if(J(e))return{width:n/e.zoom,height:c/e.zoom,top:u,left:d,factor:1,distance:p,aspect:f};{let t=2*Math.tan(e.fov*Math.PI/180/2)*p,i=n/c*t;return{width:i,height:t,top:u,left:d,factor:n/i,distance:p,aspect:f}}}let c=e=>i(t=>({performance:{...t.performance,current:e}})),d=new h.Vector2;return{set:i,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(t=1)=>e(r(),t),advance:(e,i)=>t(e,i,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new h.Clock,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();n&&clearTimeout(n),e.performance.current!==e.performance.min&&c(e.performance.min),n=setTimeout(()=>c(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>i(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,n=0,s=0)=>{let a=r().camera,c={width:e,height:t,top:n,left:s};i(e=>({size:c,viewport:{...e.viewport,...l(a,o,c)}}))},setDpr:e=>i(t=>{let i=eo(e);return{viewport:{...t.viewport,dpr:i,initialDpr:t.viewport.initialDpr||i}}}),setFrameloop:(e="always")=>{let t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),i(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:u.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,i)=>{let n=r().internal;return n.priority=n.priority+(t>0?1:0),n.subscribers.push({ref:e,priority:t,store:i}),n.subscribers=n.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let i=r().internal;null!=i&&i.subscribers&&(i.priority=i.priority-(t>0?1:0),i.subscribers=i.subscribers.filter(t=>t.ref!==e))}}}}}),r=i.getState(),n=r.size,s=r.viewport.dpr,o=r.camera;return i.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:a,set:l}=i.getState();if(t.width!==n.width||t.height!==n.height||r.dpr!==s){n=t,s=r.dpr,function(e,t){e.manual||(J(e)?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix())}(e,t),a.setPixelRatio(r.dpr);let i="undefined"!=typeof HTMLCanvasElement&&a.domElement instanceof HTMLCanvasElement;a.setSize(t.width,t.height,i)}e!==o&&(o=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),i.subscribe(t=>e(t)),i};function eA(){let e=u.useContext(eS);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function ek(e=e=>e,t){return eA()(e,t)}function eU(e,t=0){let i=eA(),r=i.getState().internal.subscribe,n=ei(e);return et(()=>r(n,t,i),[t,r,i]),null}let eL=new WeakMap,eR=e=>{var t;return"function"==typeof e&&(null==e?void 0:null==(t=e.prototype)?void 0:t.constructor)===e};function ez(e,t){return async function(i,...r){let n;return eR(i)?(n=eL.get(i))||(n=new i,eL.set(i,n)):n=i,e&&e(n),Promise.all(r.map(e=>new Promise((i,r)=>n.load(e,e=>i(ew(null==e?void 0:e.scene)?Object.assign(e,function(e){let t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}(e.scene)):e),t,t=>r(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function ej(e,t,i,r){let n=Array.isArray(t)?t:[t],s=A(ez(i,r),[e,...n],{equal:el.equ});return Array.isArray(t)?s:s[0]}ej.preload=function(e,t,i){let r=Array.isArray(t)?t:[t];return k(ez(i),[e,...r])},ej.clear=function(e,t){return U([e,...Array.isArray(t)?t:[t]])};let eD=new Map,eF={objects:"shallow",strict:!1},eI=(e,t)=>{let i="function"==typeof e?e(t):e;return eP(i)?i:new h.WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function eV(e){let t,i;let r=eD.get(e),n=null==r?void 0:r.fiber,s=null==r?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");let o="function"==typeof reportError?reportError:console.error,a=s||eM(eG,eJ),l=n||Q.createContainer(a,d.ConcurrentRoot,null,!1,null,"",o,o,o,null);r||eD.set(e,{fiber:l,store:a});let c=!1;return{configure(r={}){let{gl:n,size:s,scene:o,events:l,onCreated:u,shadows:d=!1,linear:f=!1,flat:p=!1,legacy:m=!1,orthographic:_=!1,frameloop:g="always",dpr:y=[1,2],performance:v,raycaster:b,camera:x,onPointerMissed:E}=r,w=a.getState(),O=w.gl;w.gl||w.set({gl:O=eI(n,e)});let T=w.raycaster;T||w.set({raycaster:T=new h.Raycaster});let{params:C,...P}=b||{};if(el.equ(P,T,eF)||ex(T,{...P}),el.equ(C,T.params,eF)||ex(T,{params:{...T.params,...C}}),!w.camera||w.camera===i&&!el.equ(i,x,eF)){i=x;let e=x instanceof h.Camera,t=e?x:_?new h.OrthographicCamera(0,0,0,0,.1,1e3):new h.PerspectiveCamera(75,0,.1,1e3);e||(t.position.z=5,x&&(ex(t,x),!t.manual&&("aspect"in x||"left"in x||"right"in x||"bottom"in x||"top"in x)&&(t.manual=!0,t.updateProjectionMatrix())),w.camera||null!=x&&x.rotation||t.lookAt(0,0,0)),w.set({camera:t}),T.camera=t}if(!w.scene){let e;o instanceof h.Scene?eh(e=o,a,"",{}):(eh(e=new h.Scene,a,"",{}),o&&ex(e,o)),w.set({scene:e})}if(!w.xr){let e=(e,t)=>{let i=a.getState();"never"!==i.frameloop&&eJ(e,!0,i,t)},t=()=>{let t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||eG(t)},i={connect(){let e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};O.xr&&i.connect(),w.set({xr:i})}if(O.shadowMap){let e=O.shadowMap.enabled,t=O.shadowMap.type;if(O.shadowMap.enabled=!!d,el.boo(d))O.shadowMap.type=h.PCFSoftShadowMap;else if(el.str(d)){var S;let e={basic:h.BasicShadowMap,percentage:h.PCFShadowMap,soft:h.PCFSoftShadowMap,variance:h.VSMShadowMap};O.shadowMap.type=null!=(S=e[d])?S:h.PCFSoftShadowMap}else el.obj(d)&&Object.assign(O.shadowMap,d);(e!==O.shadowMap.enabled||t!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}let M=G();M&&("enabled"in M?M.enabled=!m:"legacyMode"in M&&(M.legacyMode=m)),c||ex(O,{outputEncoding:f?3e3:3001,toneMapping:p?h.NoToneMapping:h.ACESFilmicToneMapping}),w.legacy!==m&&w.set(()=>({legacy:m})),w.linear!==f&&w.set(()=>({linear:f})),w.flat!==p&&w.set(()=>({flat:p})),!n||el.fun(n)||eP(n)||el.equ(n,O,eF)||ex(O,n),l&&!w.events.handlers&&w.set({events:l(a)});let A=function(e,t){if(!t&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:i,top:r,left:n}=e.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:n}}return!t&&"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,s);return el.equ(A,w.size,eF)||w.setSize(A.width,A.height,A.top,A.left),y&&w.viewport.dpr!==eo(y)&&w.setDpr(y),w.frameloop!==g&&w.setFrameloop(g),w.onPointerMissed||w.set({onPointerMissed:E}),v&&!el.equ(v,w.performance,eF)&&w.set(e=>({performance:{...e.performance,...v}})),t=u,c=!0,this},render(i){return c||this.configure(),Q.updateContainer((0,T.jsx)(eH,{store:a,children:i,onCreated:t,rootElement:e}),l,null,()=>void 0),a},unmount(){eN(e)}}}function eH({store:e,children:t,onCreated:i,rootElement:r}){return et(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),i&&i(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),(0,T.jsx)(eS.Provider,{value:e,children:t})}function eN(e,t){let i=eD.get(e),r=null==i?void 0:i.fiber;if(r){let n=null==i?void 0:i.store.getState();n&&(n.internal.active=!1),Q.updateContainer(null,r,null,()=>{n&&setTimeout(()=>{try{var i,r,s,o;null==n.events.disconnect||n.events.disconnect(),null==(i=n.gl)||null==(r=i.renderLists)||null==r.dispose||r.dispose(),null==(s=n.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(o=n.gl)&&o.xr&&n.xr.disconnect(),function(e){for(let t in"Scene"!==e.type&&(null==e.dispose||e.dispose()),e){let i=e[t];(null==i?void 0:i.type)!=="Scene"&&(null==i||null==i.dispose||i.dispose())}}(n.scene),eD.delete(e),t&&t(e)}catch(e){}},500)})}}Q.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:u.version});let eY=new Set,eZ=new Set,eB=new Set;function eq(e,t){if(e.size)for(let{callback:i}of e.values())i(t)}function e$(e,t){switch(e){case"before":return eq(eY,t);case"after":return eq(eZ,t);case"tail":return eq(eB,t)}}function eW(e,t,i){let s=t.clock.getDelta();"never"===t.frameloop&&"number"==typeof e&&(s=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),r=t.internal.subscribers;for(let e=0;e<r.length;e++)(n=r[e]).ref.current(n.store.getState(),s,i);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let eQ=!1,eK=!1;function eX(e){for(let i of(o=requestAnimationFrame(eX),eQ=!0,s=0,e$("before",e),eK=!0,eD.values())){var t;(a=i.store.getState()).internal.active&&("always"===a.frameloop||a.internal.frames>0)&&!(null!=(t=a.gl.xr)&&t.isPresenting)&&(s+=eW(e,a))}if(eK=!0,e$("after",e),0===s)return e$("tail",e),eQ=!1,cancelAnimationFrame(o)}function eG(e,t=1){var i;if(!e)return eD.forEach(e=>eG(e.store.getState(),t));null!=(i=e.gl.xr)&&i.isPresenting||!e.internal.active||"never"===e.frameloop||(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):eK?e.internal.frames=2:e.internal.frames=1,eQ||(eQ=!0,requestAnimationFrame(eX)))}function eJ(e,t=!0,i,r){if(t&&e$("before",e),i)eW(e,i,r);else for(let t of eD.values())eW(e,t.store.getState());t&&e$("after",e)}},18081:(e,t,i)=>{"use strict";i.d(t,{Hl:()=>m});var r=i(60846),n=i(12115),s=i(27274),o=i(13758),a=i.n(o);let l=["x","y","top","bottom","left","right","width","height"],c=(e,t)=>l.every(i=>e[i]===t[i]);var h=i(42353),u=i(95155);i(26188),i(5193),i(21065);let d={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function f(e){let{handlePointer:t}=(0,r.c)(e);return{priority:1,enabled:!0,compute(e,t,i){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(d).reduce((e,i)=>({...e,[i]:t(i)}),{}),update:()=>{var t;let{events:i,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{let{set:i,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),i(e=>({events:{...e.events,connected:t}})),r.handlers)for(let e in r.handlers){let i=r.handlers[e],[n,s]=d[e];t.addEventListener(n,i,{passive:s})}},disconnect:()=>{let{set:t,events:i}=e.getState();if(i.connected){if(i.handlers)for(let e in i.handlers){let t=i.handlers[e],[r]=d[e];i.connected.removeEventListener(r,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}let p=n.forwardRef(function({children:e,fallback:t,resize:i,style:o,gl:l,events:h=f,eventSource:d,eventPrefix:p,shadows:m,linear:_,flat:g,legacy:y,orthographic:v,frameloop:b,dpr:x,performance:E,raycaster:w,camera:O,scene:T,onPointerMissed:C,onCreated:P,...S},M){n.useMemo(()=>(0,r.e)(s),[]);let A=(0,r.u)(),[k,U]=function(e){var t;let{debounce:i,scroll:r,polyfill:s,offsetSize:o}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,l=s||("undefined"==typeof window?class{}:window.ResizeObserver);if(!l)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[h,u]=(0,n.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=(0,n.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:h}),f=i?"number"==typeof i?i:i.scroll:null,p=i?"number"==typeof i?i:i.resize:null,m=(0,n.useRef)(!1);(0,n.useEffect)(()=>(m.current=!0,()=>void(m.current=!1)));let[_,g,y]=(0,n.useMemo)(()=>{let e=()=>{if(!d.current.element)return;let{left:e,top:t,width:i,height:r,bottom:n,right:s,x:a,y:l}=d.current.element.getBoundingClientRect(),h={left:e,top:t,width:i,height:r,bottom:n,right:s,x:a,y:l};d.current.element instanceof HTMLElement&&o&&(h.height=d.current.element.offsetHeight,h.width=d.current.element.offsetWidth),Object.freeze(h),m.current&&!c(d.current.lastBounds,h)&&u(d.current.lastBounds=h)};return[e,p?a()(e,p):e,f?a()(e,f):e]},[u,o,f,p]);function v(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",y,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function b(){d.current.element&&(d.current.resizeObserver=new l(y),d.current.resizeObserver.observe(d.current.element),r&&d.current.scrollContainers&&d.current.scrollContainers.forEach(e=>e.addEventListener("scroll",y,{capture:!0,passive:!0})))}return t=!!r,(0,n.useEffect)(()=>{if(t)return window.addEventListener("scroll",y,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",y,!0)},[y,t]),(0,n.useEffect)(()=>(window.addEventListener("resize",g),()=>void window.removeEventListener("resize",g)),[g]),(0,n.useEffect)(()=>{v(),b()},[r,y,g]),(0,n.useEffect)(()=>v,[]),[e=>{e&&e!==d.current.element&&(v(),d.current.element=e,d.current.scrollContainers=function e(t){let i=[];if(!t||t===document.body)return i;let{overflow:r,overflowX:n,overflowY:s}=window.getComputedStyle(t);return[r,n,s].some(e=>"auto"===e||"scroll"===e)&&i.push(t),[...i,...e(t.parentElement)]}(e),b())},h,_]}({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=n.useRef(null),R=n.useRef(null);n.useImperativeHandle(M,()=>L.current);let z=(0,r.a)(C),[j,D]=n.useState(!1),[F,I]=n.useState(!1);if(j)throw j;if(F)throw F;let V=n.useRef(null);(0,r.b)(()=>{let t=L.current;U.width>0&&U.height>0&&t&&(V.current||(V.current=(0,r.d)(t)),V.current.configure({gl:l,scene:T,events:h,shadows:m,linear:_,flat:g,legacy:y,orthographic:v,frameloop:b,dpr:x,performance:E,raycaster:w,camera:O,size:U,onPointerMissed:(...e)=>null==z.current?void 0:z.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(d?(0,r.i)(d)?d.current:d:R.current),p&&e.setEvents({compute:(e,t)=>{let i=e[p+"X"],r=e[p+"Y"];t.pointer.set(i/t.size.width*2-1,-(2*(r/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==P||P(e)}}),V.current.render((0,u.jsx)(A,{children:(0,u.jsx)(r.E,{set:I,children:(0,u.jsx)(n.Suspense,{fallback:(0,u.jsx)(r.B,{set:D}),children:e})})})))}),n.useEffect(()=>{let e=L.current;if(e)return()=>(0,r.f)(e)},[]);let H=d?"none":"auto";return(0,u.jsx)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...o},...S,children:(0,u.jsx)("div",{ref:k,style:{width:"100%",height:"100%"},children:(0,u.jsx)("canvas",{ref:L,style:{display:"block"},children:t})})})}),m=n.forwardRef(function(e,t){return(0,u.jsx)(h.Af,{children:(0,u.jsx)(p,{...e,ref:t})})})},17418:(e,t)=>{"use strict";function i(e,t){var i=e.length;for(e.push(t);0<i;){var r=i-1>>>1,n=e[r];if(0<s(n,t))e[r]=t,e[i]=n,i=r;else break}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;for(var r=0,n=e.length,o=n>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,h=e[c];if(0>s(l,i))c<n&&0>s(h,l)?(e[r]=h,e[c]=i,r=c):(e[r]=l,e[a]=i,r=a);else if(c<n&&0>s(h,i))e[r]=h,e[c]=i,r=c;else break}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],u=[],d=1,f=null,p=3,m=!1,_=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)n(u);else if(t.startTime<=e)n(u),t.sortIndex=t.expirationTime,i(h,t);else break;t=r(u)}}function E(e){if(g=!1,x(e),!_){if(null!==r(h))_=!0,k();else{var t=r(u);null!==t&&U(E,t.startTime-e)}}}var w=!1,O=-1,T=5,C=-1;function P(){return!(t.unstable_now()-C<T)}function S(){if(w){var e=t.unstable_now();C=e;var i=!0;try{e:{_=!1,g&&(g=!1,v(O),O=-1),m=!0;var s=p;try{t:{for(x(e),f=r(h);null!==f&&!(f.expirationTime>e&&P());){var a=f.callback;if("function"==typeof a){f.callback=null,p=f.priorityLevel;var l=a(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){f.callback=l,x(e),i=!0;break t}f===r(h)&&n(h),x(e)}else n(h);f=r(h)}if(null!==f)i=!0;else{var c=r(u);null!==c&&U(E,c.startTime-e),i=!1}}break e}finally{f=null,p=s,m=!1}i=void 0}}finally{i?o():w=!1}}}if("function"==typeof b)o=function(){b(S)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,A=M.port2;M.port1.onmessage=S,o=function(){A.postMessage(null)}}else o=function(){y(S,0)};function k(){w||(w=!0,o())}function U(e,i){O=y(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,k())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=0x3fffffff;break;case 4:a=1e4;break;default:a=5e3}return a=s+a,e={id:d++,callback:n,priorityLevel:e,startTime:s,expirationTime:a,sortIndex:-1},s>o?(e.sortIndex=s,i(u,e),null===r(h)&&e===r(u)&&(g?(v(O),O=-1):g=!0,U(E,s-o))):(e.sortIndex=a,i(h,e),_||m||(_=!0,k())),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},21065:(e,t,i)=>{"use strict";e.exports=i(17418)},13758:e=>{function t(e,t,i){function r(){var c=Date.now()-a;c<t&&c>=0?n=setTimeout(r,t-c):(n=null,i||(l=e.apply(o,s),o=s=null))}null==t&&(t=100);var n,s,o,a,l,c=function(){o=this,s=arguments,a=Date.now();var c=i&&!n;return n||(n=setTimeout(r,t)),c&&(l=e.apply(o,s),o=s=null),l};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(l=e.apply(o,s),o=s=null,clearTimeout(n),n=null)},c}t.debounce=t,e.exports=t},47077:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2,t.NoEventPriority=0},26188:(e,t,i)=>{"use strict";e.exports=i(47077)},5193:(e,t,i)=>{"use strict";e.exports=i(22733)},36917:(e,t)=>{"use strict";function i(e,t){var i=e.length;for(e.push(t);0<i;){var r=i-1>>>1,n=e[r];if(0<s(n,t))e[r]=t,e[i]=n,i=r;else break}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;for(var r=0,n=e.length,o=n>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,h=e[c];if(0>s(l,i))c<n&&0>s(h,l)?(e[r]=h,e[c]=i,r=c):(e[r]=l,e[a]=i,r=a);else if(c<n&&0>s(h,i))e[r]=h,e[c]=i,r=c;else break}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],u=[],d=1,f=null,p=3,m=!1,_=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)n(u);else if(t.startTime<=e)n(u),t.sortIndex=t.expirationTime,i(h,t);else break;t=r(u)}}function E(e){if(g=!1,x(e),!_){if(null!==r(h))_=!0,k();else{var t=r(u);null!==t&&U(E,t.startTime-e)}}}var w=!1,O=-1,T=5,C=-1;function P(){return!(t.unstable_now()-C<T)}function S(){if(w){var e=t.unstable_now();C=e;var i=!0;try{e:{_=!1,g&&(g=!1,v(O),O=-1),m=!0;var s=p;try{t:{for(x(e),f=r(h);null!==f&&!(f.expirationTime>e&&P());){var a=f.callback;if("function"==typeof a){f.callback=null,p=f.priorityLevel;var l=a(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){f.callback=l,x(e),i=!0;break t}f===r(h)&&n(h),x(e)}else n(h);f=r(h)}if(null!==f)i=!0;else{var c=r(u);null!==c&&U(E,c.startTime-e),i=!1}}break e}finally{f=null,p=s,m=!1}i=void 0}}finally{i?o():w=!1}}}if("function"==typeof b)o=function(){b(S)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,A=M.port2;M.port1.onmessage=S,o=function(){A.postMessage(null)}}else o=function(){y(S,0)};function k(){w||(w=!0,o())}function U(e,i){O=y(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,k())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=0x3fffffff;break;case 4:a=1e4;break;default:a=5e3}return a=s+a,e={id:d++,callback:n,priorityLevel:e,startTime:s,expirationTime:a,sortIndex:-1},s>o?(e.sortIndex=s,i(u,e),null===r(h)&&e===r(u)&&(g?(v(O),O=-1):g=!0,U(E,s-o))):(e.sortIndex=a,i(h,e),_||m||(_=!0,k())),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},89888:(e,t,i)=>{"use strict";e.exports=i(36917)},19125:(e,t,i)=>{"use strict";var r=i(12115),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!n(e,i)}catch(e){return!0}}var h="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),r=s({inst:{value:i,getSnapshot:t}}),n=r[0].inst,h=r[1];return a(function(){n.value=i,n.getSnapshot=t,c(n)&&h({inst:n})},[e,i,t]),o(function(){return c(n)&&h({inst:n}),e(function(){c(n)&&h({inst:n})})},[e]),l(i),i};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:h},96854:(e,t,i)=>{"use strict";var r=i(12115),n=i(94236),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,h=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,r,n){var u=a(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;var f=o(e,(u=c(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==n&&d.hasValue){var t=d.value;if(n(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var i=r(e);return void 0!==n&&n(t,i)?t:(o=e,a=i)}var o,a,l=!1,c=void 0===i?null:i;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,i,r,n]))[0],u[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),h(f),f}},94236:(e,t,i)=>{"use strict";e.exports=i(19125)},18010:(e,t,i)=>{"use strict";e.exports=i(96854)},85407:(e,t,i)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(null,arguments)}i.d(t,{A:()=>r})},42353:(e,t,i)=>{"use strict";i.d(t,{Af:()=>v,Nz:()=>m,u5:()=>b,y3:()=>x});var r,n,s=i(12115),o=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,i)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,f=(e,t)=>{for(var i in t||(t={}))h.call(t,i)&&d(e,i,t[i]);if(c)for(var i of c(t))u.call(t,i)&&d(e,i,t[i]);return e},p=(e,t)=>a(e,l(t));function m(e,t,i){if(!e)return;if(!0===i(e))return e;let r=t?e.return:e.child;for(;r;){let e=m(r,t,i);if(e)return e;r=t?null:r.sibling}}function _(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}"undefined"!=typeof window&&((null==(r=window.document)?void 0:r.createElement)||(null==(n=window.navigator)?void 0:n.product)==="ReactNative")?s.useLayoutEffect:s.useEffect;let g=console.error;console.error=function(){let e=[...arguments].join("");if((null==e?void 0:e.startsWith("Warning:"))&&e.includes("useContext")){console.error=g;return}return g.apply(this,arguments)};let y=_(s.createContext(null));class v extends s.Component{render(){return s.createElement(y.Provider,{value:this._reactInternals},this.props.children)}}function b(){let e=s.useContext(y);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=s.useId();return s.useMemo(()=>{for(let i of[e,null==e?void 0:e.alternate]){if(!i)continue;let e=m(i,!1,e=>{let i=e.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(e)return e}},[e,t])}function x(){let e=function(){let e=b(),[t]=s.useState(()=>new Map);t.clear();let i=e;for(;i;){if(i.type&&"object"==typeof i.type){let e=void 0===i.type._context&&i.type.Provider===i.type?i.type:i.type._context;e&&e!==y&&!t.has(e)&&t.set(e,s.useContext(_(e)))}i=i.return}return t}();return s.useMemo(()=>Array.from(e.keys()).reduce((t,i)=>r=>s.createElement(t,null,s.createElement(i.Provider,p(f({},r),{value:e.get(i)}))),e=>s.createElement(v,f({},e))),[e])}},37023:(e,t,i)=>{"use strict";i.d(t,{zh:()=>t5});var r,n,s,o,a=w(),l=e=>v(e,a),c=w();l.write=e=>v(e,c);var h=w();l.onStart=e=>v(e,h);var u=w();l.onFrame=e=>v(e,u);var d=w();l.onFinish=e=>v(e,d);var f=[];l.setTimeout=(e,t)=>{let i=l.now()+t,r=()=>{let e=f.findIndex(e=>e.cancel==r);~e&&f.splice(e,1),g-=~e?1:0},n={time:i,handler:e,cancel:r};return f.splice(p(i),0,n),g+=1,b(),n};var p=e=>~(~f.findIndex(t=>t.time>e)||~f.length);l.cancel=e=>{h.delete(e),u.delete(e),d.delete(e),a.delete(e),c.delete(e)},l.sync=e=>{y=!0,l.batchedUpdates(e),y=!1},l.throttle=e=>{let t;function i(){try{e(...t)}finally{t=null}}function r(...e){t=e,l.onStart(i)}return r.handler=e,r.cancel=()=>{h.delete(i),t=null},r};var m="undefined"!=typeof window?window.requestAnimationFrame:()=>{};l.use=e=>m=e,l.now="undefined"!=typeof performance?()=>performance.now():Date.now,l.batchedUpdates=e=>e(),l.catch=console.error,l.frameLoop="always",l.advance=()=>{"demand"!==l.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):E()};var _=-1,g=0,y=!1;function v(e,t){y?(t.delete(e),e(0)):(t.add(e),b())}function b(){_<0&&(_=0,"demand"!==l.frameLoop&&m(x))}function x(){~_&&(m(x),l.batchedUpdates(E))}function E(){let e=_,t=p(_=l.now());if(t&&(O(f.splice(0,t),e=>e.handler()),g-=t),!g){_=-1;return}h.flush(),a.flush(e?Math.min(64,_-e):16.667),u.flush(),c.flush(),d.flush()}function w(){let e=new Set,t=e;return{add(i){g+=t!=e||e.has(i)?0:1,e.add(i)},delete:i=>(g-=t==e&&e.has(i)?1:0,e.delete(i)),flush(i){t.size&&(e=new Set,g-=t.size,O(t,t=>t(i)&&e.add(t)),g+=e.size,t=e)}}}function O(e,t){e.forEach(e=>{try{t(e)}catch(e){l.catch(e)}})}var T=i(12115),C=Object.defineProperty,P={};function S(){}((e,t)=>{for(var i in t)C(e,i,{get:t[i],enumerable:!0})})(P,{assign:()=>H,colors:()=>F,createStringInterpolator:()=>r,skipAnimation:()=>I,to:()=>n,willAdvance:()=>V});var M=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),A={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function k(e,t){if(A.arr(e)){if(!A.arr(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return e===t}var U=(e,t)=>e.forEach(t);function L(e,t,i){if(A.arr(e)){for(let r=0;r<e.length;r++)t.call(i,e[r],`${r}`);return}for(let r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r)}var R=e=>A.und(e)?[]:A.arr(e)?e:[e];function z(e,t){if(e.size){let i=Array.from(e);e.clear(),U(i,t)}}var j=(e,...t)=>z(e,e=>e(...t)),D=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),F=null,I=!1,V=S,H=e=>{e.to&&(n=e.to),e.now&&(l.now=e.now),void 0!==e.colors&&(F=e.colors),null!=e.skipAnimation&&(I=e.skipAnimation),e.createStringInterpolator&&(r=e.createStringInterpolator),e.requestAnimationFrame&&l.use(e.requestAnimationFrame),e.batchedUpdates&&(l.batchedUpdates=e.batchedUpdates),e.willAdvance&&(V=e.willAdvance),e.frameLoop&&(l.frameLoop=e.frameLoop)},N=new Set,Y=[],Z=[],B=0,q={get idle(){return!N.size&&!Y.length},start(e){B>e.priority?(N.add(e),l.onStart($)):(W(e),l(K))},advance:K,sort(e){if(B)l.onFrame(()=>q.sort(e));else{let t=Y.indexOf(e);~t&&(Y.splice(t,1),Q(e))}},clear(){Y=[],N.clear()}};function $(){N.forEach(W),N.clear(),l(K)}function W(e){Y.includes(e)||Q(e)}function Q(e){Y.splice(function(e,t){let i=e.findIndex(t);return i<0?e.length:i}(Y,t=>t.priority>e.priority),0,e)}function K(e){let t=Z;for(let i=0;i<Y.length;i++){let r=Y[i];B=r.priority,r.idle||(V(r),r.advance(e),r.idle||t.push(r))}return B=0,(Z=Y).length=0,(Y=t).length>0}var X="[-+]?\\d*\\.?\\d+",G=X+"%";function J(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var ee=RegExp("rgb"+J(X,X,X)),et=RegExp("rgba"+J(X,X,X,X)),ei=RegExp("hsl"+J(X,G,G)),er=RegExp("hsla"+J(X,G,G,X)),en=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,es=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,eo=/^#([0-9a-fA-F]{6})$/,ea=/^#([0-9a-fA-F]{8})$/;function el(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function ec(e,t,i){let r=i<.5?i*(1+t):i+t-i*t,n=2*i-r;return Math.round(255*el(n,r,e+1/3))<<24|Math.round(255*el(n,r,e))<<16|Math.round(255*el(n,r,e-1/3))<<8}function eh(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function eu(e){return(parseFloat(e)%360+360)%360/360}function ed(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function ef(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function ep(e){let t;let i="number"==typeof e?e>>>0===e&&e>=0&&e<=0xffffffff?e:null:(t=eo.exec(e))?parseInt(t[1]+"ff",16)>>>0:F&&void 0!==F[e]?F[e]:(t=ee.exec(e))?(eh(t[1])<<24|eh(t[2])<<16|eh(t[3])<<8|255)>>>0:(t=et.exec(e))?(eh(t[1])<<24|eh(t[2])<<16|eh(t[3])<<8|ed(t[4]))>>>0:(t=en.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ea.exec(e))?parseInt(t[1],16)>>>0:(t=es.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=ei.exec(e))?(255|ec(eu(t[1]),ef(t[2]),ef(t[3])))>>>0:(t=er.exec(e))?(ec(eu(t[1]),ef(t[2]),ef(t[3]))|ed(t[4]))>>>0:null;if(null===i)return e;let r=(0xff000000&(i=i||0))>>>24,n=(0xff0000&i)>>>16,s=(65280&i)>>>8,o=(255&i)/255;return`rgba(${r}, ${n}, ${s}, ${o})`}var em=(e,t,i)=>{if(A.fun(e))return e;if(A.arr(e))return em({range:e,output:t,extrapolate:i});if(A.str(e.output[0]))return r(e);let n=e.output,s=e.range||[0,1],o=e.extrapolateLeft||e.extrapolate||"extend",a=e.extrapolateRight||e.extrapolate||"extend",l=e.easing||(e=>e);return t=>{let i=function(e,t){for(var i=1;i<t.length-1&&!(t[i]>=e);++i);return i-1}(t,s);return function(e,t,i,r,n,s,o,a,l){let c=l?l(e):e;if(c<t){if("identity"===o)return c;"clamp"===o&&(c=t)}if(c>i){if("identity"===a)return c;"clamp"===a&&(c=i)}return r===n?r:t===i?e<=t?r:n:(t===-1/0?c=-c:i===1/0?c-=t:c=(c-t)/(i-t),c=s(c),r===-1/0?c=-c:n===1/0?c+=r:c=c*(n-r)+r,c)}(t,s[i],s[i+1],n[i],n[i+1],l,o,a,e.map)}},e_=Symbol.for("FluidValue.get"),eg=Symbol.for("FluidValue.observers"),ey=e=>!!(e&&e[e_]),ev=e=>e&&e[e_]?e[e_]():e,eb=e=>e[eg]||null;function ex(e,t){let i=e[eg];i&&i.forEach(e=>{e.eventObserved?e.eventObserved(t):e(t)})}var eE=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");ew(this,e)}},ew=(e,t)=>eC(e,e_,t);function eO(e,t){if(e[e_]){let i=e[eg];i||eC(e,eg,i=new Set),!i.has(t)&&(i.add(t),e.observerAdded&&e.observerAdded(i.size,t))}return t}function eT(e,t){let i=e[eg];if(i&&i.has(t)){let r=i.size-1;r?i.delete(t):e[eg]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var eC=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),eP=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,eS=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,eM=RegExp(`(${eP.source})(%|[a-z]+)`,"i"),eA=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ek=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,eU=e=>{let[t,i]=eL(e);if(!t||D())return e;let r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(i&&i.startsWith("--")){let e=window.getComputedStyle(document.documentElement).getPropertyValue(i);if(e)return e}else if(i&&ek.test(i))return eU(i);else if(i)return i;return e},eL=e=>{let t=ek.exec(e);if(!t)return[,];let[,i,r]=t;return[i,r]},eR=(e,t,i,r,n)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(r)}, ${n})`,ez=e=>{s||(s=F?RegExp(`(${Object.keys(F).join("|")})(?!\\w)`,"g"):/^\b$/);let t=e.output.map(e=>ev(e).replace(ek,eU).replace(eS,ep).replace(s,ep)),i=t.map(e=>e.match(eP).map(Number)),r=i[0].map((e,t)=>i.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>em({...e,output:t}));return e=>{let i=!eM.test(t[0])&&t.find(e=>eM.test(e))?.replace(eP,""),n=0;return t[0].replace(eP,()=>`${r[n++](e)}${i||""}`).replace(eA,eR)}},ej="react-spring: ",eD=e=>{let t=!1;if("function"!=typeof e)throw TypeError(`${ej}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},eF=eD(console.warn),eI=eD(console.warn);function eV(e){return A.str(e)&&("#"==e[0]||/\d/.test(e)||!D()&&ek.test(e)||e in(F||{}))}var eH=new WeakMap,eN=new Set,eY=()=>{let e=()=>{eN.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},eZ=D()?T.useEffect:T.useLayoutEffect,eB=()=>{let e=(0,T.useRef)(!1);return eZ(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function eq(){let e=(0,T.useState)()[1],t=eB();return()=>{t.current&&e(Math.random())}}var e$=e=>(0,T.useEffect)(e,eW),eW=[];function eQ(e){let t=(0,T.useRef)();return(0,T.useEffect)(()=>{t.current=e}),t.current}var eK=Symbol.for("Animated:node"),eX=e=>!!e&&e[eK]===e,eG=e=>e&&e[eK],eJ=(e,t)=>M(e,eK,t),e0=e=>e&&e[eK]&&e[eK].getPayload(),e1=class{constructor(){eJ(this,this)}getPayload(){return this.payload||[]}},e3=class extends e1{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,A.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new e3(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return A.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,A.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},e2=class extends e3{constructor(e){super(0),this._string=null,this._toString=em({output:[e,e]})}static create(e){return new e2(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(A.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=em({output:[this.getValue(),e]})),this._value=0,super.reset()}},e5={dependencies:null},e8=class extends e1{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let t={};return L(this.source,(i,r)=>{eX(i)?t[r]=i.getValue(e):ey(i)?t[r]=ev(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&U(this.payload,e=>e.reset())}_makePayload(e){if(e){let t=new Set;return L(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){e5.dependencies&&ey(e)&&e5.dependencies.add(e);let t=e0(e);t&&U(t,e=>this.add(e))}},e4=class extends e8{constructor(e){super(e)}static create(e){return new e4(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let t=this.getPayload();return e.length==t.length?t.map((t,i)=>t.setValue(e[i])).some(Boolean):(super.setValue(e.map(e6)),!0)}};function e6(e){return(eV(e)?e2:e3).create(e)}function e9(e){let t=eG(e);return t?t.constructor:A.arr(e)?e4:eV(e)?e2:e3}var e7=(e,t)=>{let i=!A.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,T.forwardRef)((r,n)=>{let s=(0,T.useRef)(null),o=i&&(0,T.useCallback)(e=>{s.current=function(e,t){return e&&(A.fun(e)?e(t):e.current=t),t}(n,e)},[n]),[a,c]=function(e,t){let i=new Set;return e5.dependencies=i,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new e8(e),e5.dependencies=null,[e,i]}(r,t),h=eq(),u=()=>{let e=s.current;(!i||e)&&!1===(!!e&&t.applyAnimatedValues(e,a.getValue(!0)))&&h()},d=new te(u,c),f=(0,T.useRef)();eZ(()=>(f.current=d,U(c,e=>eO(e,d)),()=>{f.current&&(U(f.current.deps,e=>eT(e,f.current)),l.cancel(f.current.update))})),(0,T.useEffect)(u,[]),e$(()=>()=>{let e=f.current;U(e.deps,t=>eT(t,e))});let p=t.getComponentProps(a.getValue());return T.createElement(e,{...p,ref:o})})},te=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&l.write(this.update)}},tt=Symbol.for("AnimatedComponent"),ti=e=>A.str(e)?e:e&&A.str(e.displayName)?e.displayName:A.fun(e)&&e.name||null;function tr(e,...t){return A.fun(e)?e(...t):e}var tn=(e,t)=>!0===e||!!(t&&e&&(A.fun(e)?e(t):R(e).includes(t))),ts=(e,t)=>A.obj(e)?t&&e[t]:e,to=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,ta=e=>e,tl=(e,t=ta)=>{let i=tc;e.default&&!0!==e.default&&(i=Object.keys(e=e.default));let r={};for(let n of i){let i=t(e[n],n);A.und(i)||(r[n]=i)}return r},tc=["config","onProps","onStart","onChange","onPause","onResume","onRest"],th={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function tu(e){let t=function(e){let t={},i=0;if(L(e,(e,r)=>{!th[r]&&(t[r]=e,i++)}),i)return t}(e);if(t){let i={to:t};return L(e,(e,r)=>r in t||(i[r]=e)),i}return{...e}}function td(e){return e=ev(e),A.arr(e)?e.map(td):eV(e)?P.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function tf(e){return A.fun(e)||A.arr(e)&&A.obj(e[0])}var tp={tension:170,friction:26,mass:1,damping:1,easing:e=>e,clamp:!1},tm=class{constructor(){this.velocity=0,Object.assign(this,tp)}};function t_(e,t){if(A.und(t.decay)){let i=!A.und(t.tension)||!A.und(t.friction);!i&&A.und(t.frequency)&&A.und(t.damping)&&A.und(t.mass)||(e.duration=void 0,e.decay=void 0),i&&(e.frequency=void 0)}else e.duration=void 0}var tg=[],ty=class{constructor(){this.changed=!1,this.values=tg,this.toValues=null,this.fromValues=tg,this.config=new tm,this.immediate=!1}};function tv(e,{key:t,props:i,defaultProps:r,state:n,actions:s}){return new Promise((o,a)=>{let c,h;let u=tn(i.cancel??r?.cancel,t);if(u)p();else{A.und(i.pause)||(n.paused=tn(i.pause,t));let e=r?.pause;!0!==e&&(e=n.paused||tn(e,t)),c=tr(i.delay||0,t),e?(n.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){n.resumeQueue.add(f),n.timeouts.delete(h),h.cancel(),c=h.time-l.now()}function f(){c>0&&!P.skipAnimation?(n.delayed=!0,h=l.setTimeout(p,c),n.pauseQueue.add(d),n.timeouts.add(h)):p()}function p(){n.delayed&&(n.delayed=!1),n.pauseQueue.delete(d),n.timeouts.delete(h),e<=(n.cancelId||0)&&(u=!0);try{s.start({...i,callId:e,cancel:u},o)}catch(e){a(e)}}})}var tb=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?tw(e.get()):t.every(e=>e.noop)?tx(e.get()):tE(e.get(),t.every(e=>e.finished)),tx=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),tE=(e,t,i=!1)=>({value:e,finished:t,cancelled:i}),tw=e=>({value:e,cancelled:!0,finished:!1});function tO(e,t,i,r){let{callId:n,parentId:s,onRest:o}=t,{asyncTo:a,promise:c}=i;return s||e!==a||t.reset?i.promise=(async()=>{let h,u,d;i.asyncId=n,i.asyncTo=e;let f=tl(t,(e,t)=>"onRest"===t?void 0:e),p=new Promise((e,t)=>(h=e,u=t)),m=e=>{let t=n<=(i.cancelId||0)&&tw(r)||n!==i.asyncId&&tE(r,!1);if(t)throw e.result=t,u(e),e},_=(e,t)=>{let s=new tC,o=new tP;return(async()=>{if(P.skipAnimation)throw tT(i),o.result=tE(r,!1),u(o),o;m(s);let a=A.obj(e)?{...e}:{...t,to:e};a.parentId=n,L(f,(e,t)=>{A.und(a[t])&&(a[t]=e)});let l=await r.start(a);return m(s),i.paused&&await new Promise(e=>{i.resumeQueue.add(e)}),l})()};if(P.skipAnimation)return tT(i),tE(r,!1);try{let t;t=A.arr(e)?(async e=>{for(let t of e)await _(t)})(e):Promise.resolve(e(_,r.stop.bind(r))),await Promise.all([t.then(h),p]),d=tE(r.get(),!0,!1)}catch(e){if(e instanceof tC)d=e.result;else if(e instanceof tP)d=e.result;else throw e}finally{n==i.asyncId&&(i.asyncId=s,i.asyncTo=s?a:void 0,i.promise=s?c:void 0)}return A.fun(o)&&l.batchedUpdates(()=>{o(d,r,r.item)}),d})():c}function tT(e,t){z(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var tC=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},tP=class extends Error{constructor(){super("SkipAnimationSignal")}},tS=e=>e instanceof tA,tM=1,tA=class extends eE{constructor(){super(...arguments),this.id=tM++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=eG(this);return e&&e.getValue()}to(...e){return P.to(this,e)}interpolate(...e){return eF(`${ej}The "interpolate" function is deprecated in v9 (use "to" instead)`),P.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){ex(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||q.sort(this),ex(this,{type:"priority",parent:this,priority:e})}},tk=Symbol.for("SpringPhase"),tU=e=>(1&e[tk])>0,tL=e=>(2&e[tk])>0,tR=e=>(4&e[tk])>0,tz=(e,t)=>t?e[tk]|=3:e[tk]&=-3,tj=(e,t)=>t?e[tk]|=4:e[tk]&=-5,tD=class extends tA{constructor(e,t){if(super(),this.animation=new ty,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!A.und(e)||!A.und(t)){let i=A.obj(e)?{...e}:{...t,from:e};A.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(tL(this)||this._state.asyncTo)||tR(this)}get goal(){return ev(this.animation.to)}get velocity(){let e=eG(this);return e instanceof e3?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return tU(this)}get isAnimating(){return tL(this)}get isPaused(){return tR(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1,r=this.animation,{toValues:n}=r,{config:s}=r,o=e0(r.to);!o&&ey(r.to)&&(n=R(ev(r.to))),r.values.forEach((a,l)=>{if(a.done)return;let c=a.constructor==e2?1:o?o[l].lastPosition:n[l],h=r.immediate,u=c;if(!h){let t;if(u=a.lastPosition,s.tension<=0){a.done=!0;return}let i=a.elapsedTime+=e,n=r.fromValues[l],o=null!=a.v0?a.v0:a.v0=A.arr(s.velocity)?s.velocity[l]:s.velocity,d=s.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(A.und(s.duration)){if(s.decay){let e=!0===s.decay?.998:s.decay,r=Math.exp(-(1-e)*i);u=n+o/(1-e)*(1-r),h=Math.abs(a.lastPosition-u)<=d,t=o*r}else{t=null==a.lastVelocity?o:a.lastVelocity;let i=s.restVelocity||d/10,r=s.clamp?0:s.bounce,l=!A.und(r),f=n==c?a.v0>0:n<c,p=Math.ceil(e/1);for(let e=0;e<p&&!(!(Math.abs(t)>i)&&(h=Math.abs(c-u)<=d));++e){l&&(u==c||u>c==f)&&(t=-t*r,u=c);let e=(-(1e-6*s.tension)*(u-c)+-(.001*s.friction)*t)/s.mass;t+=1*e,u+=1*t}}}else{let r=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,a.durationProgress>0&&(a.elapsedTime=s.duration*a.durationProgress,i=a.elapsedTime+=e)),r=(r=(s.progress||0)+i/this._memoizedDuration)>1?1:r<0?0:r,a.durationProgress=r),t=((u=n+s.easing(r)*(c-n))-a.lastPosition)/e,h=1==r}a.lastVelocity=t,Number.isNaN(u)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[l].done&&(h=!1),h?a.done=!0:t=!1,a.setValue(u,s.round)&&(i=!0)});let a=eG(this),l=a.getValue();if(t){let e=ev(r.to);(l!==e||i)&&!s.decay?(a.setValue(e),this._onChange(e)):i&&s.decay&&this._onChange(l),this._stop()}else i&&this._onChange(l)}set(e){return l.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(tL(this)){let{to:e,config:t}=this.animation;l.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return A.und(e)?(i=this.queue||[],this.queue=[]):i=[A.obj(e)?e:{...t,to:e}],Promise.all(i.map(e=>this._update(e))).then(e=>tb(this,e))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),tT(this._state,e&&this._lastCallId),l.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:i,from:r}=e;(null==(i=A.obj(i)?i[t]:i)||tf(i))&&(i=void 0),null==(r=A.obj(r)?r[t]:r)&&(r=void 0);let n={to:i,from:r};return tU(this)||(e.reverse&&([i,r]=[r,i]),r=ev(r),A.und(r)?eG(this)||this._set(i):this._set(r)),n}_update({...e},t){let{key:i,defaultProps:r}=this;e.default&&Object.assign(r,tl(e,(e,t)=>/^on/.test(t)?ts(e,i):e)),tY(this,e,"onProps"),tZ(this,"onProps",e,this);let n=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let s=this._state;return tv(++this._lastCallId,{key:i,props:e,defaultProps:r,state:s,actions:{pause:()=>{tR(this)||(tj(this,!0),j(s.pauseQueue),tZ(this,"onPause",tE(this,tF(this,this.animation.to)),this))},resume:()=>{tR(this)&&(tj(this,!1),tL(this)&&this._resume(),j(s.resumeQueue),tZ(this,"onResume",tE(this,tF(this,this.animation.to)),this))},start:this._merge.bind(this,n)}}).then(i=>{if(e.loop&&i.finished&&!(t&&i.noop)){let t=tI(e);if(t)return this._update(t,!0)}return i})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(tw(this));let r=!A.und(e.to),n=!A.und(e.from);if(r||n){if(!(t.callId>this._lastToId))return i(tw(this));this._lastToId=t.callId}let{key:s,defaultProps:o,animation:a}=this,{to:c,from:h}=a,{to:u=c,from:d=h}=e;n&&!r&&(!t.default||A.und(u))&&(u=d),t.reverse&&([u,d]=[d,u]);let f=!k(d,h);f&&(a.from=d),d=ev(d);let p=!k(u,c);p&&this._focus(u);let m=tf(t.to),{config:_}=a,{decay:g,velocity:y}=_;(r||n)&&(_.velocity=0),t.config&&!m&&function(e,t,i){for(let r in i&&(t_(i={...i},t),t={...i,...t}),t_(e,t),Object.assign(e,t),tp)null==e[r]&&(e[r]=tp[r]);let{frequency:r,damping:n}=e,{mass:s}=e;A.und(r)||(r<.01&&(r=.01),n<0&&(n=0),e.tension=Math.pow(2*Math.PI/r,2)*s,e.friction=4*Math.PI*n*s/r)}(_,tr(t.config,s),t.config!==o.config?tr(o.config,s):void 0);let v=eG(this);if(!v||A.und(u))return i(tE(this,!0));let b=A.und(t.reset)?n&&!t.default:!A.und(d)&&tn(t.reset,s),x=b?d:this.get(),E=td(u),w=A.num(E)||A.arr(E)||eV(E),O=!m&&(!w||tn(o.immediate||t.immediate,s));if(p){let e=e9(u);if(e!==v.constructor){if(O)v=this._set(E);else throw Error(`Cannot animate between ${v.constructor.name} and ${e.name}, as the "to" prop suggests`)}}let T=v.constructor,C=ey(u),P=!1;if(!C){let e=b||!tU(this)&&f;(p||e)&&(C=!(P=k(td(x),E))),(k(a.immediate,O)||O)&&k(_.decay,g)&&k(_.velocity,y)||(C=!0)}if(P&&tL(this)&&(a.changed&&!b?C=!0:C||this._stop(c)),!m&&((C||ey(c))&&(a.values=v.getPayload(),a.toValues=ey(u)?null:T==e2?[1]:R(E)),a.immediate==O||(a.immediate=O,O||b||this._set(c)),C)){let{onRest:e}=a;U(tN,e=>tY(this,t,e));let r=tE(this,tF(this,c));j(this._pendingCalls,r),this._pendingCalls.add(i),a.changed&&l.batchedUpdates(()=>{a.changed=!b,e?.(r,this),b?tr(o.onRest,r):a.onStart?.(r,this)})}b&&this._set(x),m?i(tO(t.to,t,this._state,this)):C?this._start():tL(this)&&!p?this._pendingCalls.add(i):i(tx(x))}_focus(e){let t=this.animation;e!==t.to&&(eb(this)&&this._detach(),t.to=e,eb(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;ey(t)&&(eO(t,this),tS(t)&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;ey(e)&&eT(e,this)}_set(e,t=!0){let i=ev(e);if(!A.und(i)){let e=eG(this);if(!e||!k(i,e.getValue())){let r=e9(i);e&&e.constructor==r?e.setValue(i):eJ(this,r.create(i)),e&&l.batchedUpdates(()=>{this._onChange(i,t)})}}return eG(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,tZ(this,"onStart",tE(this,tF(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),tr(this.animation.onChange,e,this)),tr(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;eG(this).reset(ev(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),tL(this)||(tz(this,!0),tR(this)||this._resume())}_resume(){P.skipAnimation?this.finish():q.start(this)}_stop(e,t){if(tL(this)){tz(this,!1);let i=this.animation;U(i.values,e=>{e.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),ex(this,{type:"idle",parent:this});let r=t?tw(this.get()):tE(this.get(),tF(this,e??i.to));j(this._pendingCalls,r),i.changed&&(i.changed=!1,tZ(this,"onRest",r,this))}}};function tF(e,t){let i=td(t);return k(td(e.get()),i)}function tI(e,t=e.loop,i=e.to){let r=tr(t);if(r){let n=!0!==r&&tu(r),s=(n||e).reverse,o=!n||n.reset;return tV({...e,loop:t,default:!1,pause:void 0,to:!s||tf(i)?i:void 0,from:o?e.from:void 0,reset:o,...n})}}function tV(e){let{to:t,from:i}=e=tu(e),r=new Set;return A.obj(t)&&tH(t,r),A.obj(i)&&tH(i,r),e.keys=r.size?Array.from(r):null,e}function tH(e,t){L(e,(e,i)=>null!=e&&t.add(i))}var tN=["onStart","onRest","onChange","onPause","onResume"];function tY(e,t,i){e.animation[i]=t[i]!==to(t,i)?ts(t[i],e.key):void 0}function tZ(e,t,...i){e.animation[t]?.(...i),e.defaultProps[t]?.(...i)}var tB=["onStart","onChange","onRest"],tq=1,t$=class{constructor(e,t){this.id=tq++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(let t in e){let i=e[t];A.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(tV(e)),this}start(e){let{queue:t}=this;return(e?t=R(e).map(tV):this.queue=[],this._flush)?this._flush(this,t):(t0(this,t),tW(this,t))}stop(e,t){if(!!e!==e&&(t=e),t){let i=this.springs;U(R(t),t=>i[t].stop(!!e))}else tT(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(A.und(e))this.start({pause:!0});else{let t=this.springs;U(R(e),e=>t[e].pause())}return this}resume(e){if(A.und(e))this.start({pause:!1});else{let t=this.springs;U(R(e),e=>t[e].resume())}return this}each(e){L(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,n=this._changed.size>0;(r&&!this._started||n&&!this._started)&&(this._started=!0,z(e,([e,t])=>{t.value=this.get(),e(t,this,this._item)}));let s=!r&&this._started,o=n||s&&i.size?this.get():null;n&&t.size&&z(t,([e,t])=>{t.value=o,e(t,this,this._item)}),s&&(this._started=!1,z(i,([e,t])=>{t.value=o,e(t,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}l.onFrame(this._onFrame)}};function tW(e,t){return Promise.all(t.map(t=>tQ(e,t))).then(t=>tb(e,t))}async function tQ(e,t,i){let{keys:r,to:n,from:s,loop:o,onRest:a,onResolve:c}=t,h=A.obj(t.default)&&t.default;o&&(t.loop=!1),!1===n&&(t.to=null),!1===s&&(t.from=null);let u=A.arr(n)||A.fun(n)?n:void 0;u?(t.to=void 0,t.onRest=void 0,h&&(h.onRest=void 0)):U(tB,i=>{let r=t[i];if(A.fun(r)){let n=e._events[i];t[i]=({finished:e,cancelled:t})=>{let i=n.get(r);i?(e||(i.finished=!1),t&&(i.cancelled=!0)):n.set(r,{value:null,finished:e||!1,cancelled:t||!1})},h&&(h[i]=t[i])}});let d=e._state;!d.paused===t.pause?(d.paused=t.pause,j(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);let f=(r||Object.keys(e.springs)).map(i=>e.springs[i].start(t)),p=!0===t.cancel||!0===to(t,"cancel");(u||p&&d.asyncId)&&f.push(tv(++e._lastAsyncId,{props:t,state:d,actions:{pause:S,resume:S,start(t,i){p?(tT(d,e._lastAsyncId),i(tw(e))):(t.onRest=a,i(tO(u,t,d,e)))}}})),d.paused&&await new Promise(e=>{d.resumeQueue.add(e)});let m=tb(e,await Promise.all(f));if(o&&m.finished&&!(i&&m.noop)){let i=tI(t,o,n);if(i)return t0(e,[i]),tQ(e,i,!0)}return c&&l.batchedUpdates(()=>c(m,e,e.item)),m}function tK(e,t){let i={...e.springs};return t&&U(R(t),e=>{A.und(e.keys)&&(e=tV(e)),A.obj(e.to)||(e={...e,to:void 0}),tJ(i,e,e=>tG(e))}),tX(e,i),i}function tX(e,t){L(t,(t,i)=>{e.springs[i]||(e.springs[i]=t,eO(t,e))})}function tG(e,t){let i=new tD;return i.key=e,t&&eO(i,t),i}function tJ(e,t,i){t.keys&&U(t.keys,r=>{(e[r]||(e[r]=i(r)))._prepareNode(t)})}function t0(e,t){U(t,t=>{tJ(e.springs,t,t=>tG(t,e))})}var t1=({children:e,...t})=>{let i=(0,T.useContext)(t3),r=t.pause||!!i.pause,n=t.immediate||!!i.immediate;t=function(e,t){let[i]=(0,T.useState)(()=>({inputs:t,result:e()})),r=(0,T.useRef)(),n=r.current,s=n;return s?t&&s.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(t,s.inputs)||(s={inputs:t,result:e()}):s=i,(0,T.useEffect)(()=>{r.current=s,n==i&&(i.inputs=i.result=void 0)},[s]),s.result}(()=>({pause:r,immediate:n}),[r,n]);let{Provider:s}=t3;return T.createElement(s,{value:t},e)},t3=function(e,t){return Object.assign(e,T.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(t1,{});t1.Provider=t3.Provider,t1.Consumer=t3.Consumer;var t2=()=>{let e=[],t=function(t){eI(`${ej}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);let r=[];return U(e,(e,n)=>{if(A.und(t))r.push(e.start());else{let s=i(t,e,n);s&&r.push(e.start(s))}}),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){let i=e.indexOf(t);~i&&e.splice(i,1)},t.pause=function(){return U(e,e=>e.pause(...arguments)),this},t.resume=function(){return U(e,e=>e.resume(...arguments)),this},t.set=function(t){U(e,(e,i)=>{let r=A.fun(t)?t(i,e):t;r&&e.set(r)})},t.start=function(t){let i=[];return U(e,(e,r)=>{if(A.und(t))i.push(e.start());else{let n=this._getProps(t,e,r);n&&i.push(e.start(n))}}),i},t.stop=function(){return U(e,e=>e.stop(...arguments)),this},t.update=function(t){return U(e,(e,i)=>e.update(this._getProps(t,e,i))),this};let i=function(e,t,i){return A.fun(e)?e(i,t):e};return t._getProps=i,t};function t5(e,t){let i=A.fun(e),[[r],n]=function(e,t,i){let r=A.fun(t)&&t;r&&!i&&(i=[]);let n=(0,T.useMemo)(()=>r||3==arguments.length?t2():void 0,[]),s=(0,T.useRef)(0),o=eq(),a=(0,T.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){let i=tK(e,t);return!(s.current>0)||a.queue.length||Object.keys(i).some(t=>!e.springs[t])?new Promise(r=>{tX(e,i),a.queue.push(()=>{r(tW(e,t))}),o()}):tW(e,t)}}),[]),l=(0,T.useRef)([...a.ctrls]),c=[],h=eQ(e)||0;function u(e,i){for(let n=e;n<i;n++){let e=l.current[n]||(l.current[n]=new t$(null,a.flush)),i=r?r(n,e):t[n];i&&(c[n]=function(e){let t=tV(e);return A.und(t.default)&&(t.default=tl(t)),t}(i))}}(0,T.useMemo)(()=>{U(l.current.slice(e,h),e=>{e.ref?.delete(e),n?.delete(e),e.stop(!0)}),l.current.length=e,u(h,e)},[e]),(0,T.useMemo)(()=>{u(0,Math.min(h,e))},i);let d=l.current.map((e,t)=>tK(e,c[t])),f=(0,T.useContext)(t1),p=eQ(f),m=f!==p&&function(e){for(let t in e)return!0;return!1}(f);eZ(()=>{s.current++,a.ctrls=l.current;let{queue:e}=a;e.length&&(a.queue=[],U(e,e=>e())),U(l.current,(e,t)=>{var i;n?.add(e),m&&e.start({default:f});let r=c[t];r&&((i=r.ref)&&e.ref!==i&&(e.ref?.delete(e),i.add(e),e.ref=i),e.ref?e.queue.push(r):e.start(r))})}),e$(()=>()=>{U(a.ctrls,e=>e.stop(!0))});let _=d.map(e=>({...e}));return n?[_,n]:_}(1,i?e:[e],i?t||[]:t);return i||2==arguments.length?[r,n]:r}var t8=class extends tA{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=em(...t);let i=this._get();eJ(this,e9(i).create(i))}advance(e){let t=this._get();k(t,this.get())||(eG(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&t6(this._active)&&t9(this)}_get(){let e=A.arr(this.source)?this.source.map(ev):R(ev(this.source));return this.calc(...e)}_start(){this.idle&&!t6(this._active)&&(this.idle=!1,U(e0(this),e=>{e.done=!1}),P.skipAnimation?(l.batchedUpdates(()=>this.advance()),t9(this)):q.start(this))}_attach(){let e=1;U(R(this.source),t=>{ey(t)&&eO(t,this),tS(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){U(R(this.source),e=>{ey(e)&&eT(e,this)}),this._active.clear(),t9(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=R(this.source).reduce((e,t)=>Math.max(e,(tS(t)?t.priority:0)+1),0))}};function t4(e){return!1!==e.idle}function t6(e){return!e.size||Array.from(e).every(t4)}function t9(e){e.idle||(e.idle=!0,U(e0(e),e=>{e.done=!0}),ex(e,{type:"idle",parent:e}))}P.assign({createStringInterpolator:ez,to:(e,t)=>new t8(e,t)}),q.advance;var t7=i(47650),ie=/^--/,it={},ii={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ir=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),is=["Webkit","Ms","Moz","O"];ii=Object.keys(ii).reduce((e,t)=>(is.forEach(i=>e[ir(i,t)]=e[t]),e),ii);var io=/^(matrix|translate|scale|rotate|skew)/,ia=/^(translate)/,il=/^(rotate|skew)/,ic=(e,t)=>A.num(e)&&0!==e?e+t:e,ih=(e,t)=>A.arr(e)?e.every(e=>ih(e,t)):A.num(e)?e===t:parseFloat(e)===t,iu=class extends e8{constructor({x:e,y:t,z:i,...r}){let n=[],s=[];(e||t||i)&&(n.push([e||0,t||0,i||0]),s.push(e=>[`translate3d(${e.map(e=>ic(e,"px")).join(",")})`,ih(e,0)])),L(r,(e,t)=>{if("transform"===t)n.push([e||""]),s.push(e=>[e,""===e]);else if(io.test(t)){if(delete r[t],A.und(e))return;let i=ia.test(t)?"px":il.test(t)?"deg":"";n.push(R(e)),s.push("rotate3d"===t?([e,t,r,n])=>[`rotate3d(${e},${t},${r},${ic(n,i)})`,ih(n,0)]:e=>[`${t}(${e.map(e=>ic(e,i)).join(",")})`,ih(e,t.startsWith("scale")?1:0)])}}),n.length&&(r.transform=new id(n,s)),super(r)}},id=class extends eE{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return U(this.inputs,(i,r)=>{let n=ev(i[0]),[s,o]=this.transforms[r](A.arr(n)?n:i.map(ev));e+=" "+s,t=t&&o}),t?"none":e}observerAdded(e){1==e&&U(this.inputs,e=>U(e,e=>ey(e)&&eO(e,this)))}observerRemoved(e){0==e&&U(this.inputs,e=>U(e,e=>ey(e)&&eT(e,this)))}eventObserved(e){"change"==e.type&&(this._value=null),ex(this,e)}};P.assign({batchedUpdates:t7.unstable_batchedUpdates,createStringInterpolator:ez,colors:{transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff}}),((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=e=>new e8(e),getComponentProps:r=e=>e}={})=>{let n={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:r},s=e=>{let t=ti(e)||"Anonymous";return(e=A.str(e)?s[e]||(s[e]=e7(e,n)):e[tt]||(e[tt]=e7(e,n))).displayName=`Animated(${t})`,e};return L(e,(t,i)=>{A.arr(e)&&(i=ti(t)),s[i]=s(t)}),{animated:s}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;let i="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:r,style:n,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=t,h=Object.values(c),u=Object.keys(c).map(t=>i||e.hasAttribute(t)?t:it[t]||(it[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())));for(let t in void 0!==s&&(e.textContent=s),n)if(n.hasOwnProperty(t)){var d;let i=null==(d=n[t])||"boolean"==typeof d||""===d?"":"number"!=typeof d||0===d||ie.test(t)||ii.hasOwnProperty(t)&&ii[t]?(""+d).trim():d+"px";ie.test(t)?e.style.setProperty(t,i):e.style[t]=i}u.forEach((t,i)=>{e.setAttribute(t,h[i])}),void 0!==r&&(e.className=r),void 0!==o&&(e.scrollTop=o),void 0!==a&&(e.scrollLeft=a),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new iu(e),getComponentProps:({scrollTop:e,scrollLeft:t,...i})=>i}).animated}}]);